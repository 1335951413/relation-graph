(function(){ try {var elementStyle = document.createElement('style'); elementStyle.appendChild(document.createTextNode(".rg-icon[data-v-3618c7b0]{width:19px;height:19px;vertical-align:0px;fill:currentColor;overflow:hidden}.el-icon-remove[data-v-3618c7b0],.el-icon-circle-plus[data-v-3618c7b0]{cursor:pointer}.rel-node-peel[data-v-3618c7b0]{clear:both;padding:8px;position:absolute;font-size:14px}.rel-node[data-v-3618c7b0]{text-align:center}.rel-node-shape-1[data-v-3618c7b0]{border-radius:5px}.c-node-text[data-v-3618c7b0]{height:100%;width:100%;display:flex;align-items:center;justify-content:center}.rel-node-shape-1 .c-node-text[data-v-3618c7b0]{padding-left:5px;padding-right:5px}.rel-node-shape-0[data-v-3618c7b0]{width:80px;height:80px;border-radius:50%}.rel-node-type-button[data-v-3618c7b0]{border-radius:25px;color:#00f;cursor:pointer}.rel-node-checked[data-v-3618c7b0],.rel-node-selected[data-v-3618c7b0]{box-shadow:0 0 10px #fd8b37;animation-timing-function:linear;animation:ACTRGNodeInit-3618c7b0 2s}.rel-node-vtree-2[data-v-3618c7b0]{transform-origin:0 0;transform:rotate(30deg) translate(0)}.rel-node-vtree[data-v-3618c7b0]{width:130px;height:45px;text-align:left}.c-btn-open-close[data-v-3618c7b0]{position:absolute;height:100%;width:19px;display:flex;align-items:center;justify-content:center;user-select:none;pointer-events:none}.c-btn-open-close span[data-v-3618c7b0]{width:19px;height:19px;display:inline-block;text-align:center;border-radius:15px;color:#fff;cursor:pointer;font-size:19px;line-height:16px;background-size:100% 100%;pointer-events:all}.c-expanded[data-v-3618c7b0]{background-image:url(data:image/svg+xml;%20charset=utf8,%3Csvg%20t=%221606310217820%22%20viewBox=%220%200%201024%201024%22%20version=%221.1%22%20xmlns=%22http://www.w3.org/2000/svg%22%20p-id=%223373%22%20width=%2232%22%20height=%2232%22%3E%3Cpath%20d=%22M853.333333%20480H544V170.666667c0-17.066667-14.933333-32-32-32s-32%2014.933333-32%2032v309.333333H170.666667c-17.066667%200-32%2014.933333-32%2032s14.933333%2032%2032%2032h309.333333V853.333333c0%2017.066667%2014.933333%2032%2032%2032s32-14.933333%2032-32V544H853.333333c17.066667%200%2032-14.933333%2032-32s-14.933333-32-32-32z%22%20p-id=%223374%22%20fill=%22white%22%3E%3C/path%3E%3C/svg%3E)}.c-collapsed[data-v-3618c7b0]{background-image:url(data:image/svg+xml;%20charset=utf8,%3Csvg%20t=%221606310454619%22%20class=%22icon%22%20viewBox=%220%200%201024%201024%22%20version=%221.1%22%20xmlns=%22http://www.w3.org/2000/svg%22%20p-id=%223662%22%20width=%22128%22%20height=%22128%22%3E%3Cpath%20d=%22M853.333333%20554.666667H170.666667c-23.466667%200-42.666667-19.2-42.666667-42.666667s19.2-42.666667%2042.666667-42.666667h682.666666c23.466667%200%2042.666667%2019.2%2042.666667%2042.666667s-19.2%2042.666667-42.666667%2042.666667z%22%20p-id=%223663%22%20fill=%22white%22%3E%3C/path%3E%3C/svg%3E)}.c-expand-positon-left[data-v-3618c7b0]{margin-top:-8px;margin-left:-25px}.c-expand-positon-right[data-v-3618c7b0]{height:100%;width:100%;justify-content:center}.c-expand-positon-right span[data-v-3618c7b0]{margin-top:-18px;margin-right:-18px;margin-left:100%}.c-expand-positon-bottom[data-v-3618c7b0]{height:100%;width:100%;margin-top:7px;margin-left:-8px;align-items:flex-end;justify-content:center}.c-expand-positon-top[data-v-3618c7b0]{height:18px;width:100%;margin-top:-20px;margin-left:-6px;align-items:flex-end;justify-content:center}@keyframes ACTRGNodeInit-3618c7b0{0%{box-shadow:0 0 15px #fd8b37}15%{box-shadow:0 0 1px #2e4e8f}30%{box-shadow:0 0 15px #fd8b37}45%{box-shadow:0 0 1px #2e4e8f}60%{box-shadow:0 0 15px #fd8b37}to{box-shadow:0 0 1px #2e4e8f}}.rel-diy-node[data-v-3618c7b0]{padding:0}.c-rg-line-text[data-v-cb0ffd30]{fill:#888;font-size:12px}.c-rg-line[data-v-cb0ffd30]{z-index:1000;fill-rule:nonzero}.c-rg-line-tool[data-v-cb0ffd30]{stroke-dasharray:5,5,5}.c-rg-line-flash[data-v-cb0ffd30]{-moz-transform:rotate(-89deg) translateX(-190px);animation-timing-function:linear;animation:ACTRGLineChecked-cb0ffd30 10s}@keyframes ACTRGLineInit-cb0ffd30{0%{stroke-dashoffset:10px;stroke-dasharray:20,20,20}to{stroke-dashoffset:0;stroke-dasharray:0,0,0}}@keyframes ACTRGLineChecked-cb0ffd30{0%{stroke-dashoffset:352px}to{stroke-dashoffset:0}}.c-rg-line-text{fill:#888;font-size:12px}.c-rg-line{z-index:1000;fill-rule:nonzero}.c-rg-line-tool{stroke-dasharray:5,5,5}.c-rg-line-flash{-moz-transform:rotate(-89deg) translateX(-190px);animation-timing-function:linear;animation:ACTRGLineChecked 10s}@keyframes ACTRGLineInit{0%{stroke-dashoffset:10px;stroke-dasharray:20,20,20}to{stroke-dashoffset:0;stroke-dasharray:0,0,0}}@keyframes ACTRGLineChecked{0%{stroke-dashoffset:352px}to{stroke-dashoffset:0}}.c-rg-line-checked{stroke-width:2px;stroke-dasharray:5,5,5;stroke-dashoffset:3px;stroke-linecap:butt;stroke-linejoin:bevel;-moz-transform:rotate(-89deg) translateX(-190px);animation-timing-function:linear;animation:ACTRGLineChecked 10s}.c-rg-line-text[data-v-a64f93b9]{fill:#888;font-size:12px}.c-rg-line[data-v-a64f93b9]{z-index:1000;fill-rule:nonzero}.c-rg-line-tool[data-v-a64f93b9]{stroke-dasharray:5,5,5}.c-rg-line-flash[data-v-a64f93b9]{-moz-transform:rotate(-89deg) translateX(-190px);animation-timing-function:linear;animation:ACTRGLineChecked-a64f93b9 10s}@keyframes ACTRGLineInit-a64f93b9{0%{stroke-dashoffset:10px;stroke-dasharray:20,20,20}to{stroke-dashoffset:0;stroke-dasharray:0,0,0}}@keyframes ACTRGLineChecked-a64f93b9{0%{stroke-dashoffset:352px}to{stroke-dashoffset:0}}.rel-map[data-v-535155b9]{background-color:#fff;overflow:hidden;cursor:default;user-select:none}.rel-map-background-norepeat[data-v-535155b9]{background-repeat:no-repeat;background-position:right bottom}.rel-nodediv-for-webkit[data-v-535155b9]{position:absolute;width:100%;top:0px;left:0px;z-index:1000}.rel-map-canvas[data-v-535155b9]{position:relative;top:0px;left:0px;border:0px;z-index:3}svg[data-v-535155b9]{height:100%;width:100%}.rel-linediv[data-v-535155b9]{position:absolute;z-index:900;width:100%;top:0px;left:0px;--stroke: url(#lineStyle);--markerEnd: url(#arrow-default);--markerStart: url(#start-arrow-default);--markerEndChecked: url(#arrow-checked);--markerStartChecked: url(#start-arrow-checked)}.rel-linediv svg[data-v-535155b9]{overflow:visible}.rel-map[data-v-535155b9] img{-webkit-user-drag:none;-webkit-user-select:none}.c-setting-panel[data-v-6d4bb74f]{--height: 300px;--width: 200px;width:300px;height:200px;position:absolute;margin-left:10px;margin-top:5px;font-size:12px;color:#3a5bb2;padding:60px 10px 10px;overflow:hidden;box-shadow:0 0 5px #999;border-radius:5px;z-index:1000;background-color:#fff;border:#999999 solid 1px}.c-setting-panel-button[data-v-6d4bb74f]{height:35px;width:35px;font-size:8px;line-height:35px;text-align:center;border-radius:50%;position:absolute;margin-left:25px;margin-top:20px;background-color:#3a5bb2;color:#fff;cursor:pointer;z-index:1001;box-shadow:0 0 8px #999}.c-setting-panel-button[data-v-6d4bb74f]:hover{box-shadow:0 0 20px #ffa20a;border:#ffffff solid 1px;color:#ffa20a;-moz-transform:rotate(-89deg) translateX(-190px);animation-timing-function:linear;animation:flashButton-6d4bb74f 2s infinite}.c-fixedLayout[data-v-6d4bb74f]{position:fixed;top:125px}@keyframes flashButton-6d4bb74f{0%{box-shadow:0 0 8px #2e4e8f}30%{box-shadow:0 0 20px #ffa20a}to{box-shadow:0 0 8px #2e4e8f}}.c-debug-tools-row[data-v-6d4bb74f]{text-align:left}.c-mini-graph[data-v-52c18d33]{height:100px;width:100px;position:absolute;margin-left:60px;margin-top:100px;z-index:999}.c-fixedLayout[data-v-52c18d33]{position:fixed;top:100px}.c-mini-canvas[data-v-52c18d33]{background-color:#aacbff;border:#7ba8ff solid 1px;opacity:.8;position:relative}.c-mini-view[data-v-52c18d33]{background-color:#f5a565;border:#c03639 solid 1px;opacity:.5;color:#fff;font-size:14px;text-align:center;display:flex;align-items:center;justify-content:center;position:absolute}.c-mini-node[data-v-52c18d33]{position:absolute;width:2px;height:2px;background-color:#000;border-radius:1px}.rg-icon[data-v-d0169000]{width:16px;height:16px;vertical-align:-3px;fill:currentColor;overflow:hidden}.c-mini-toolbar[data-v-d0169000]{width:44px;position:absolute;margin-top:170px;margin-right:10px;z-index:999;border:#bbbbbb solid 1px;background-color:#fff;box-shadow:0 0 8px #ccc;box-sizing:border-box}.c-fixedLayout[data-v-d0169000]{position:fixed;top:100px}.c-mb-button[data-v-d0169000]{height:44px;width:42px;margin-top:0;background-color:#fff;border-top:#efefef solid 1px;opacity:1;text-align:center;padding-top:3px;cursor:pointer;color:#999;font-size:18px;float:left;box-sizing:border-box;line-height:21px}.c-mb-button .c-mb-text[data-v-d0169000]{display:inline-block;height:14px;width:42px;font-size:12px;line-height:12px;margin-top:24px;margin-left:-28px;position:absolute;color:#262626}.c-mb-button-on[data-v-d0169000]{background-color:#2e74b5;border-top:#2e4e8f solid 1px;color:#fff}.c-mb-button[data-v-d0169000]:hover{background-color:#2e4e8f;border-top:#2e4e8f solid 1px;color:#fff}.c-mb-button:hover .c-mb-text[data-v-d0169000],.c-mb-button-on .c-mb-text[data-v-d0169000]{color:#fff}.c-mb-button .c-mb-child-panel[data-v-d0169000]{height:46px;position:absolute;margin-top:-26px;background-color:#fff;display:none;border:#bbbbbb solid 1px;box-shadow:0 0 8px #ccc;box-sizing:border-box}.c-mb-button:hover .c-mb-child-panel[data-v-d0169000]{display:block}.c-mb-button .c-mb-button[data-v-d0169000]{height:44px;width:42px;margin:0;border:none}.c-mb-button-c .c-mb-text[data-v-d0169000]{color:#262626!important}.c-mb-button-c:hover .c-mb-text[data-v-d0169000],.c-mb-button-on .c-mb-text[data-v-d0169000]{color:#fff!important}.c-loading-icon[data-v-d0169000]{animation:turn-d0169000 1s linear infinite}@keyframes turn-d0169000{0%{-webkit-transform:rotate(0deg)}25%{-webkit-transform:rotate(90deg)}50%{-webkit-transform:rotate(180deg)}75%{-webkit-transform:rotate(270deg)}to{-webkit-transform:rotate(360deg)}}.xxxxxxxxx[data-v-361faa52]{color:red}")); document.head.appendChild(elementStyle);} catch(e) {console.error('vite-plugin-css-injected-by-js', e);} })();var Pe = Object.defineProperty;
var Ee = (o, t, e) => t in o ? Pe(o, t, { enumerable: !0, configurable: !0, writable: !0, value: e }) : o[t] = e;
var S = (o, t, e) => (Ee(o, typeof t != "symbol" ? t + "" : t, e), e);
import { defineComponent as V, ref as G, inject as Y, computed as U, onMounted as ue, onBeforeUnmount as we, withDirectives as Ne, openBlock as v, createElementBlock as w, normalizeStyle as F, unref as u, normalizeClass as B, createElementVNode as p, withModifiers as H, createCommentVNode as z, renderSlot as T, vShow as ze, toDisplayString as ne, Fragment as O, renderList as j, createBlock as se, withCtx as re, pushScopeId as ke, popScopeId as be, createTextVNode as Ie, provide as Ae, nextTick as De, createVNode as ve } from "vue";
import * as Be from "screenfull";
import de from "screenfull";
import * as Fe from "html2canvas";
import We from "html2canvas";
const Ce = "2.0.12", J = Symbol(), Ge = () => window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width, Re = () => window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height, He = (o) => {
  let t = 0;
  for (const e of o) {
    const s = e.charCodeAt(0);
    s < 0 || s > 255 ? t += 2 : t++;
  }
  return t;
};
let ie = !1;
const Oe = () => {
  try {
    document.createEvent("TouchEvent"), ie = !0;
  } catch {
  }
};
Oe();
const _ = (...o) => {
  typeof window < "u" && window.relationGraphDebug && console.log("[relation-graph:debug]", ...o);
}, Te = () => {
  console.log(
    `%c relation-graph/vue3 %c Version v${Ce} %c More info: https://github.com/seeksdream/relation-graph %c`,
    "background:#35495e ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff",
    "background:#41b883 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff",
    "background:#fff ; padding: 1px; border-radius: 0 3px 3px 0;  color: #41b883",
    "background:transparent"
  ), Be || console.error(
    "[relation-graph]Please introduce component screenfull, for example:https://cdnjs.cloudflare.com/ajax/libs/screenfull.js/5.1.0/screenfull.min.js"
  ), Fe || console.error(
    "[relation-graph]Please introduce component html2canvas, for example:https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"
  );
}, ye = 0, X = {
  getRectPoint(o, t, e, s, n, i, a, r) {
    const l = o + n / 2, c = t + i / 2, h = e + a / 2, d = s + r / 2, f = l < h ? 1 : -1, C = c < d ? 1 : -1;
    if (d === c)
      return { x: l + f * n / 2, y: c };
    const x = Math.abs((h - l) / (d - c)), m = n / i;
    let g = 0, y = 0;
    return x < m ? (g = f * i / 2 * x, y = C * i / 2) : (g = f * n / 2, y = C * n / 2 / x), { x: l + g, y: c + y };
  },
  getRectPointBasic(o, t, e, s, n, i, a, r) {
    const l = o + n / 2, c = t + i / 2, h = e + a / 2, d = s + r / 2;
    let f = d === c ? 0 : (h - l) / (d - c);
    f === 0 && (f = (h - l) / (d - c + 1));
    const C = n / r;
    let x = 0, m = 0, g = "1";
    return -1 * C < f && f < C ? (g = "2", c < d ? (x = i / 2 * f, m = i / 2) : (x = -1 * i / 2 * f, m = -1 * i / 2)) : (l < h ? (x = 1 * n / 2, m = 1 * n / 2 / f) : (x = -1 * n / 2, m = -1 * n / 2 / f), g = "3"), { x: l + x, y: c + m, _case: g };
  },
  getRectJoinPoint(o, t, e, s, n, i, a, r) {
    const l = o + n / 2, c = t + i / 2, h = e + a / 2, d = s + r / 2, f = Math.round(
      Math.atan2(d - c, h - l) * 180 / 3.14
    ) + 135;
    return f >= 0 && f < 90 ? { x: o + n / 2, y: t - 5 } : f >= 90 && f < 180 ? { x: o + n + 5, y: t + i / 2 } : f >= 180 && f < 270 ? { x: o + n / 2, y: t + i + 5 } : { x: o - 5, y: t + i / 2 };
  },
  getRectHJoinPoint(o, t, e, s, n, i, a) {
    const r = i / 2;
    return o + n < e ? { x: o + n + 5, y: t + r } : o + n < e + a ? { x: o - 5, y: t + r } : { x: o - 5, y: t + r };
  },
  getRectVJoinPoint(o, t, e, s, n, i, a, r) {
    const l = n / 2;
    return t + i < s ? { y: t + i + 5, x: o + l } : t + i < s + r ? { y: t - 5, x: o + l } : { y: t - 5, x: o + l };
  },
  getBorderPoint(o, t, e, s, n, i, a, r, l) {
    return l === 0 ? this.getCirclePoint(o, t, e, s, n, i, a, r) : this.getRectPoint(o, t, e, s, n, i, a, r);
  },
  getBorderPoint4MultiLine(o, t, e, s, n, i, a, r, l, c, h, d) {
    return l === 0 ? this.getCirclePoint4MultiLine(
      o,
      t,
      e,
      s,
      n,
      i,
      a,
      r,
      c,
      h,
      d
    ) : this.getRectPoint(o, t, e, s, n, i, a, r);
  },
  getCirclePoint(o, t, e, s, n, i, a, r) {
    const l = e + a / 2, c = s + r / 2, h = o + n / 2, d = t + i / 2, f = l - h;
    if (f === 0)
      return { x: h, y: d - i / 2 * (c < d ? 1 : -1) };
    const x = (c - d) / f, m = Math.sqrt(1 / (1 / (n / 2) ** 2 + x ** 2 / (i / 2) ** 2)) * (l < h ? 1 : -1), g = x * m;
    return { x: h - m, y: d - g };
  },
  getCirclePoint4MultiLine(o, t, e, s, n, i, a, r, l, c, h) {
    l && (h = c - h - 1);
    const d = e + a / 2, f = s + r / 2, C = o + n / 2, x = t + i / 2, m = d - C;
    if (m === 0)
      return { x: C, y: x - i / 2 * (f < x ? 1 : -1) };
    const g = 40 / (c + 1) * (h + 1) - 20, y = f - x, $ = Math.sqrt(m ** 2 + y ** 2) * g / m, M = y / m, b = n / 2, W = i / 2, k = d < C ? 1 : -1, I = (-1 * b ** 2 * M * $ + b * W * Math.sqrt(W ** 2 + M ** 2 * b ** 2 - $ ** 2) / k) / (W ** 2 + b ** 2 * M ** 2), Q = M * I + $;
    return { x: C - I, y: x - Q };
  },
  getCirclePointBasic(o, t, e, s, n, i, a, r, l) {
    const c = o + n / 2, h = t + i / 2, d = e + a / 2, f = s + r / 2, C = d - c, x = f - h, m = Math.sqrt(C * C + x * x), g = m - l, y = g * C / m * -1, $ = g * x / m * -1;
    return { x: d + y, y: f + $ };
  },
  getCirclePointPlus(o, t, e, s, n, i, a, r) {
    const l = o + n / 2, c = t + i / 2, h = e + a / 2, d = s + r / 2, f = h - l, C = d - c, x = Math.sqrt(f * f + C * C), m = (x - n / 2) * f / x * -1, g = (x - i / 2) * C / x * -1;
    return { x: h + m, y: d + g };
  },
  getOvalPoint(o, t, e, s, n) {
    return {
      x: o + e * Math.sin(
        (ye + s * (360 / n) + 0) * Math.PI / 180
      ),
      y: t + e * Math.cos(
        (ye + s * (360 / n) + 0) * Math.PI / 180
      ) * -1
    };
  },
  getAngleType(o, t) {
    if (o >= 0 && t >= 0)
      return 1;
    if (o < 0 && t >= 0)
      return 2;
    if (o < 0 && t < 0)
      return 3;
    if (o >= 0 && t < 0)
      return 4;
  },
  getTextAngle(o, t, e, s) {
    let n = Math.atan(Math.abs((s - t) / (e - o))) * 180 / Math.PI;
    return e > o && s > t || (e > o && s < t ? n = -n : e < o && s > t ? n = 180 - n : n = n - 180), Math.abs(n) > 90 && (n = n + 180), Math.round(n);
  },
  getTreePointFromTop(o, t, e, s, n, i) {
    return o ? {
      x: o - 300 + Math.max(600 / ((n === 1 ? 2 : n) - 1), 80) * s,
      y: t + e
    } : {
      x: (i.canvas_width - i.node_width) / 2,
      y: (i.canvas_height - i.node_height) / 2 - 200
    };
  },
  getTreePointFromRight(o, t, e, s, n, i) {
    return o ? {
      x: o - e,
      y: t - 200 + Math.max(400 / ((n === 1 ? 2 : n) - 1), 80) * s
    } : {
      x: (i.canvas_width - i.node_width) / 2 + 300,
      y: (i.canvas_height - i.node_height) / 2
    };
  },
  getTreePointFromBottom(o, t, e, s, n, i) {
    return o ? {
      x: o - 300 + Math.max(600 / ((n === 1 ? 2 : n) - 1), 80) * s,
      y: t - e
    } : {
      x: (i.canvas_width - i.node_width) / 2,
      y: (i.canvas_height - i.node_height) / 2 + 200
    };
  },
  getTreePointFromLeft(o, t, e, s, n, i) {
    return o ? {
      x: o + e,
      y: t - 200 + Math.max(400 / ((n === 1 ? 2 : n) - 1), 80) * s
    } : {
      x: (i.canvas_width - i.node_width) / 2 - 300,
      y: (i.canvas_height - i.node_height) / 2
    };
  },
  analysisNodes(o, t, e, s) {
    t.length > s.max_length && (s.max_length = t.length), e > s.max_deep && (s.max_deep = e);
    const n = {
      level: e,
      all_size: t.length,
      all_strength: 0
    }, i = [];
    t.forEach((r) => {
      r.lot || (r.lot = { childs: [] }), r.lot.eached = !0, r.lot.subling = n, r.lot.level = e, o.push(r);
    });
    let a = 0;
    t.forEach((r) => {
      let l = 0;
      if (r.targetNodes) {
        let c = 0;
        r.targetNodes.forEach((h) => {
          h.lot || (h.lot = { childs: [], eached: !1 }), h.lot.eached || (X.isAllowShowNode(h) ? (h.lot.eached = !0, h.lot.parent = r, h.lot.index_of_parent = c++, r.lot.childs.push(h), i.push(h), l++) : r.lot.childs.push(h));
        });
      }
      r.lot.strength = l > 0 ? l : 1, n.all_strength += r.lot.strength, r.lot.strength_plus = n.all_strength, r.lot.index_of_level = a, r.lot.childs_size = l, a++;
    }), n.all_strength > s.max_strength && (s.max_strength = n.all_strength), i.length > 0 ? this.analysisNodes(
      o,
      i,
      e + 1,
      s
    ) : (o.forEach((r) => {
      r.lot.childs_size && r.lot.childs_size > 0 && (r.lot.strengthWithChilds = 0);
    }), o.forEach((r) => {
      r.lot.childs_size === 0 && (r.lot.strengthWithChilds = 1, this.conductStrengthToParents(r));
    }), this.analysisDataTree([o[0]], 0));
  },
  analysisNodes4Didirectional(o, t, e, s, n) {
    t.length > s.max_length && (s.max_length = t.length), e > s.max_deep && (s.max_deep = e);
    const i = {
      level: e,
      all_size: t.length,
      all_strength: 0
    }, a = [];
    t.forEach((l) => {
      l.lot || (l.lot = { childs: [] }), l.lot.eached = !0, l.lot.subling = i, l.lot.level = e, o.push(l);
    });
    let r = 0;
    t.forEach((l) => {
      let c = 0;
      if (n === 0) {
        let h = 0;
        l.targetNodes.forEach((d) => {
          d.lot || (d.lot = { childs: [], eached: !1 }), d.lot.eached || (X.isAllowShowNode(d) ? (d.lot.eached = !0, d.lot.parent = l, d.lot.index_of_parent = h++, l.lot.childs.push(d), a.push(d), c++) : l.lot.childs.push(d));
        });
      } else if (n === -1) {
        let h = 0;
        l.targetFrom.forEach((d) => {
          d.lot || (d.lot = { childs: [], eached: !1 }), d.lot.eached || (X.isAllowShowNode(d) ? (d.lot.eached = !0, d.lot.parent = l, d.lot.index_of_parent = h++, l.lot.childs.push(d), a.push(d), c++) : l.lot.childs.push(d));
        });
      } else {
        let h = 0;
        l.targetTo.forEach((d) => {
          d.lot || (d.lot = { childs: [], eached: !1 }), d.lot.eached || (X.isAllowShowNode(d) ? (d.lot.eached = !0, d.lot.parent = l, d.lot.index_of_parent = h++, l.lot.childs.push(d), a.push(d), c++) : l.lot.childs.push(d));
        });
      }
      l.lot.strength = c > 0 ? c : 1, i.all_strength += l.lot.strength, l.lot.strength_plus = i.all_strength, l.lot.index_of_level = r, l.lot.childs_size = c, r++;
    }), i.all_strength > s.max_strength && (s.max_strength = i.all_strength), a.length > 0 ? X.analysisNodes4Didirectional(
      o,
      a,
      e + (n === -1 ? -1 : 1),
      s,
      n
    ) : (o.forEach((l) => {
      l.lot.childs_size && l.lot.childs_size > 0 && (l.lot.strengthWithChilds = 0);
    }), o.forEach((l) => {
      l.lot.childs_size === 0 && (l.lot.strengthWithChilds = 1, X.conductStrengthToParents(l));
    }), X.analysisDataTree([o[0]], 0, n));
  },
  conductStrengthToParents(o) {
    o.lot.parent && (o.lot.parent.lot.strengthWithChilds === void 0 && (o.lot.parent.lot.strengthWithChilds = 0), o.lot.parent.lot.strengthWithChilds += 1, this.conductStrengthToParents(o.lot.parent));
  },
  analysisDataTree(o, t, e) {
    e === void 0 && (e = 1);
    const s = [];
    let n = 0;
    o.forEach((i) => {
      (i.lot.level === 0 || e === (i.lot.level && i.lot.level < 0 ? -1 : 1)) && (i.lot.childs_size && i.lot.childs_size > 0 && i.lot.childs.forEach((a) => {
        s.push(a);
      }), i.lot.parent && i.lot.parent.lot.strengthWithChilds_from && n < i.lot.parent.lot.strengthWithChilds_from && (n = i.lot.parent.lot.strengthWithChilds_from), i.lot.strengthWithChilds_from = n, n += i.lot.strengthWithChilds || 0);
    }), s.length > 0 && this.analysisDataTree(s, t + e, e);
  },
  isAllowShowNode(o, t = 0) {
    return o.isShow !== !1 && o.isHide !== !0 && (!o.lot.parent || this.isAllowShowNode(o.lot.parent, t + 1) === !0);
  }
}, Ve = (o, t, e, s) => {
  const n = o - e, i = t - s, a = n ** 2, r = i ** 2, l = a + r;
  return Math.sqrt(l);
}, N = X, Je = (o) => {
  if (o.from === void 0)
    throw new Error(
      `error,line must has option[from]:${JSON.stringify(o)}`
    );
  if (o.to === void 0)
    throw new Error(
      `error,line must has option[to]:${JSON.stringify(o)}`
    );
  if (typeof o.from != "string")
    throw new TypeError(
      `error line from, must be string:${JSON.stringify(o)}`
    );
  if (typeof o.to != "string")
    throw new TypeError(
      `error line to, must be string:${JSON.stringify(o)}`
    );
  const t = {
    seeks_id: "",
    isReverse: !1,
    from: o.from,
    to: o.to,
    text: o.text !== void 0 ? o.text : "",
    color: o.color !== void 0 ? o.color : void 0,
    fontColor: o.fontColor !== void 0 ? o.fontColor : void 0,
    lineWidth: o.lineWidth !== void 0 ? o.lineWidth : void 0,
    lineShape: o.lineShape !== void 0 ? o.lineShape : void 0,
    styleClass: o.styleClass !== void 0 ? o.styleClass : void 0,
    isHide: o.isHide !== void 0 ? o.isHide : !1,
    arrow: o.arrow !== void 0 ? o.arrow : void 0,
    showStartArrow: o.showStartArrow !== void 0 ? o.showStartArrow : !1,
    disableDefaultClickEffect: o.disableDefaultClickEffect !== void 0 ? o.disableDefaultClickEffect : !1,
    showEndArrow: o.showEndArrow !== void 0 ? o.showEndArrow : !0,
    useTextPath: o.useTextPath !== void 0 ? o.useTextPath : !1,
    isHideArrow: o.isHideArrow !== void 0 ? o.isHideArrow : void 0,
    lineDirection: o.lineDirection !== void 0 ? o.lineDirection : void 0,
    data: o.data !== void 0 ? o.data : {}
  };
  return t.isHideArrow && (t.showEndArrow = !1, t.isHideArrow = !1), t;
}, Ze = ["arrow", "id", "reverseText", "isReverse"], je = (o, t) => {
  !o || o.relations.forEach((e) => {
    const s = {};
    Object.keys(e).forEach((n) => {
      Ze.includes(n) || e[n] !== void 0 && (s[n] = e[n]);
    }), t.push(s);
  });
}, le = {
  border: "border",
  ltrb: "ltrb",
  tb: "tb",
  lr: "lr"
};
class Ye {
  constructor(t, e) {
    S(this, "graphOptions");
    S(this, "layoutOptions");
    S(this, "rootNode");
    S(this, "allNodes", []);
    S(this, "__origin_nodes", []);
    S(this, "layoutTimes", 0);
    S(this, "maxLayoutTimes", 300);
    S(this, "justLayoutSingleNode", !1);
    S(this, "byNode", !0);
    S(this, "byLine", !0);
    this.layoutOptions = t, this.graphOptions = e;
  }
  refresh() {
    this.placeNodes(this.__origin_nodes, this.rootNode);
  }
  placeNodes(t, e) {
    if (!e) {
      _("root is null:", e);
      return;
    }
    _("layout by root:", e), this.__origin_nodes = t, this.rootNode = e;
    let s = 0;
    this.__origin_nodes.forEach((n) => {
      n.lot.placed && s++;
    }), this.analysisNodes(), s === 0 ? this.initNodesPosition() : this.__origin_nodes.forEach((n) => {
      n.lot.placed || (n.x || (n.x = Math.floor(Math.random() * 200) - 100), n.x || (n.y = Math.floor(Math.random() * 200) - 100), n.lot.placed = !0);
    }), _("Start Auto Layout....."), this.autoLayout(!0);
  }
  analysisNodes() {
    this.__origin_nodes.forEach((e) => {
      e.lot.eached = !1, e.lot.notLeafNode = !1, e.lot.childs = [], e.lot.index_of_parent = 0, e.lot.strength = 0, e.lot.placed = !1;
    }), this.allNodes = [];
    const t = {
      max_deep: 1,
      max_length: 1,
      max_strength: 1
    };
    N.analysisNodes4Didirectional(
      this.allNodes,
      [this.rootNode],
      0,
      t,
      0
    );
  }
  initNodesPosition() {
    const t = this.rootNode;
    t.lot.x = -(t.el.offsetWidth || t.width || 60) / 2, t.lot.y = -(t.el.offsetHeight || t.height || 60) / 2, _("root position:", t.lot.x, t.lot.y), _(
      "[layout canvasOffset]",
      this.graphOptions.viewSize,
      this.graphOptions.canvasSize
    ), this.placeRelativePosition(this.rootNode, {
      max_deep: 1,
      max_length: 1,
      max_strength: 1
    }), this.allNodes.forEach((e) => {
      e.fixed !== !0 && (!N.isAllowShowNode(e) || (e.x = e.lot.x || 50, e.y = e.lot.y || 50, e.lot.placed = !0));
    });
  }
  placeRelativePosition(t, e) {
    let s = 80;
    this.allNodes.forEach((n) => {
      if (n.lot.subling && n.lot.subling.level === 1) {
        s = n.lot.subling.all_size * 20 / Math.PI / 2, s < 80 && (s = 80);
        const i = N.getOvalPoint(
          t.lot.x,
          t.lot.y,
          n.lot.subling.level * s,
          n.lot.strength_plus - n.lot.strength / 2,
          n.lot.subling.all_strength
        );
        n.lot.x = i.x, n.lot.y = i.y;
      }
    }), this.allNodes.forEach((n) => {
      if (n.lot.subling && n.lot.subling.level > 1 && n.lot.parent) {
        const i = n.lot.parent.lot.strength_plus - n.lot.parent.lot.strength, r = (n.lot.parent.lot.strength_plus - i) / (n.lot.parent.lot.childs_size + 1) * (n.lot.index_of_parent + 1), l = N.getOvalPoint(
          t.lot.x,
          t.lot.y,
          (n.lot.subling.level - 1) * 80 + s,
          i + r,
          n.lot.parent.lot.subling.all_strength
        );
        n.lot.x = l.x, n.lot.y = l.y;
      }
    });
  }
  autoLayout(t) {
    if (t && (this.layoutTimes = 0), _("this.layoutTimes:", this.layoutTimes), this.layoutTimes > this.maxLayoutTimes) {
      this.graphOptions.autoLayouting = !1;
      return;
    }
    if (this.graphOptions.autoLayouting = !0, this.layoutTimes++, this.__origin_nodes.forEach((e) => {
      e.Fx = 0, e.Fy = 0;
    }), this.byNode)
      for (const e in this.__origin_nodes) {
        const s = this.__origin_nodes[e];
        if (!(this.justLayoutSingleNode && !s.singleNode) && s.lot.placed === !0)
          for (const n in this.__origin_nodes) {
            const i = this.__origin_nodes[n];
            i.lot.placed === !0 && e !== n && this.addGravityByNode(s, i);
          }
      }
    if (this.byLine)
      for (const e in this.__origin_nodes)
        this.__origin_nodes[e].lot.parent && this.addElasticByLine(
          this.__origin_nodes[e].lot.parent,
          this.__origin_nodes[e]
        );
    for (const e in this.__origin_nodes)
      this.applyToNodePosition(this.__origin_nodes[e]);
    window.setTimeout(() => {
      this.autoLayout();
    }, 30);
  }
  stop() {
    this.layoutTimes = 1e3;
  }
  addElasticByLine(t, e) {
    let s = Math.sqrt((t.y - e.y) ** 2 + (t.x - e.x) ** 2);
    s > 1e3 && (s = 1e3);
    const n = s < 30 ? 0 : (s - 30) * 0.05, i = n, a = n, r = (t.x - e.x) / s, l = (t.y - e.y) / s;
    this.addFtoNode(t, r * i * -1, l * i * -1), this.addFtoNode(e, r * a, l * a);
  }
  addGravityByNode(t, e) {
    const s = Math.sqrt(
      (t.y - e.y) ** 2 + (t.x - e.x) ** 2
    ), n = 300;
    let i = s > n ? 0 : (n - s) * 0.03;
    const a = (t.x - e.x) / s, r = (t.y - e.y) / s;
    this.addFtoNode(t, a * i, r * i), this.addFtoNode(e, a * i * -1, r * i * -1);
  }
  getNodeFWeight(t) {
    let e = t.lot.level;
    return e > 7 && (e = 7), e < 0 && (e = 0), (8 - e) / 8;
  }
  addFtoNode(t, e, s) {
    this.justLayoutSingleNode && !t.singleNode || Number.isNaN(e) || Number.isNaN(s) || (e = e / (t.lot.strength || 1), s = s / (t.lot.strength || 1), e > 50 && (e = 50), s > 50 && (s = 50), e < -50 && (e = -50), s < -50 && (s = -50), t.Fx += e, t.Fy += s);
  }
  applyToNodePosition(t) {
    const e = Math.round(t.Fx), s = Math.round(t.Fy);
    t.x = t.x + e, t.y = t.y + s, t.Fx = 0, t.Fy = 0;
  }
}
const fe = Ye, ge = (o) => {
  const t = {
    instanceId: "SeeksGraph",
    debug: !0,
    showDebugPanel: !1,
    backgrounImage: "",
    downloadImageFileName: "",
    disableZoom: !1,
    disableDragNode: !1,
    moveToCenterWhenRefresh: !1,
    zoomToFitWhenRefresh: !0,
    useAnimationWhenRefresh: !0,
    defaultFocusRootNode: !0,
    disableNodeClickEffect: !1,
    disableLineClickEffect: !1,
    allowShowZoomMenu: !0,
    allowAutoLayoutIfSupport: !0,
    allowShowRefreshButton: !0,
    allowShowDownloadButton: !0,
    backgrounImageNoRepeat: !1,
    allowShowMiniToolBar: !0,
    allowSwitchLineShape: !1,
    allowSwitchJunctionPoint: !1,
    isMoveByParentNode: !1,
    defaultExpandHolderPosition: "hide",
    defaultNodeColor: "#67C23A",
    checkedLineColor: "#FD8B37",
    defaultNodeFontColor: "#ffffff",
    defaultNodeBorderColor: "#90EE90",
    defaultNodeBorderWidth: 5,
    defaultLineColor: "#dddddd",
    defaultLineWidth: 1,
    defaultLineShape: 1,
    defaultNodeShape: 0,
    defaultNodeWidth: void 0,
    defaultNodeHeight: void 0,
    defaultShowLineLabel: !0,
    hideNodeContentByZoom: !1,
    defaultJunctionPoint: "border",
    disableDragCanvas: !1,
    lineUseTextPath: !1,
    viewSize: { width: 300, height: 300 },
    viewELSize: { width: 1300, height: 800, left: 0, top: 100 },
    viewNVInfo: { width: 1300, height: 800, x: 0, y: 100 },
    canvasNVInfo: { width: 1300, height: 800, x: 0, y: 100 },
    defaultLineMarker: {
      markerWidth: 12,
      markerHeight: 12,
      refX: 6,
      refY: 6,
      color: void 0,
      data: "M2,2 L10,6 L2,10 L6,6 L2,2"
    },
    allowShowMiniView: !1,
    allowShowSettingPanel: !1,
    allowShowMiniNameFilter: !0,
    fullscreen: !1,
    checkedNodeId: "",
    checkedLineId: "",
    layouts: [],
    layoutLabel: "",
    layoutName: "tree",
    layoutClassName: "",
    layoutDirection: "h",
    autoLayouting: !1,
    layouter: void 0,
    isNeedShowAutoLayoutButton: !1,
    canvasZoom: 100,
    showSingleNode: !0,
    showNodeLabel: !0,
    showNodeShortLabel: !0,
    canvasSize: {
      width: 2e3,
      height: 2e3
    },
    canvasOffset: {
      x: 25,
      y: 27,
      zoom_buff_x: 0,
      zoom_buff_y: 0
    }
  };
  return o.debug === !0 && _("RGOptions:user instance graphSetting:", o), o && Object.keys(o).forEach((s) => {
    const n = o[s];
    if (typeof n == "object") {
      _("RGOptions:user setting object:", s, n);
      const i = t[s];
      if (i)
        if (i && !Array.isArray(i) && n)
          Object.keys(i).forEach((a) => {
            i[a] = n[a];
          });
        else if (Array.isArray(i)) {
          const a = [];
          n.forEach((r) => {
            r && typeof r == "object" ? a.push(JSON.parse(JSON.stringify(r))) : a.push(r);
          }), t[s] = a;
        } else
          t[s] = n;
      else
        _("ignore option:", s);
    } else
      t[s] = n;
  }), (!t.layouts || t.layouts.length === 0) && (t.layouts = [
    {
      label: "\u4E2D\u5FC3",
      layoutName: "center",
      layoutDirection: "v"
    }
  ]), Array.isArray(t.layouts) || (t.layouts = [t.layouts]), t.layouts.forEach((s) => {
    Xe(s, t);
  }), t;
}, Xe = (o, t) => {
  if (o.layoutName === "SeeksCenterLayouter" || o.layoutName === "center") {
    o.label === void 0 && (o.label = "\u4E2D\u5FC3"), o.layoutClassName === void 0 && (o.layoutClassName = `seeks-layout-${o.layoutName}`), o.layoutDirection === void 0 && (o.layoutDirection = "h"), o.centerOffset_x === void 0 && (o.centerOffset_x = 0), o.centerOffset_y === void 0 && (o.centerOffset_y = 0);
    const e = o;
    e.distance_coefficient === void 0 && (e.distance_coefficient = 1);
  } else if (o.layoutName === "SeeksBidirectionalTreeLayouter" || o.layoutName === "tree") {
    o.label === void 0 && (o.label = "\u6811\u72B6"), o.layoutClassName === void 0 && (o.layoutClassName = `seeks-layout-${o.layoutName}`), o.layoutDirection === void 0 && (o.layoutDirection = "h"), o.centerOffset_x === void 0 && (o.centerOffset_x = 0), o.centerOffset_y === void 0 && (o.centerOffset_y = 0);
    const e = o;
    e.from === void 0 && (e.from = "top"), e.levelDistance === void 0 && (e.levelDistance = ""), e.min_per_width === void 0 && (e.min_per_width = 30), e.max_per_width === void 0 && (e.max_per_width = 200), e.min_per_height === void 0 && (e.min_per_height = 100), e.max_per_height === void 0 && (e.max_per_height = 500), (e.from === "top" || e.from === "bottom") && (e.layoutDirection = "v", t.defaultJunctionPoint = "tb", _("set layoutDirection=v"), _("set defaultJunctionPoint=tb")), (e.from === "left" || e.from === "right") && (t.defaultJunctionPoint = "lr", _("set defaultJunctionPoint=lr"));
  } else
    (o.layoutName === "fixed" || o.layoutName === "force") && (t.moveToCenterWhenRefresh = !1, t.zoomToFitWhenRefresh = !1);
}, Ue = (o) => {
  if (o.id === void 0)
    throw new Error(`Node must has option[id]:${JSON.stringify(o)}`);
  const t = {
    seeks_id: -1,
    id: o.id,
    text: o.text !== void 0 ? o.text : "",
    type: o.type !== void 0 ? o.type : "node",
    isHide: o.isHide !== void 0 ? o.isHide : !1,
    expanded: o.expanded !== void 0 ? o.expanded : !0,
    junctionPoint: o.junctionPoint !== void 0 ? o.junctionPoint : void 0,
    selected: o.selected !== void 0 ? o.selected : !1,
    styleClass: o.styleClass !== void 0 ? o.styleClass : "",
    nodeShape: o.nodeShape !== void 0 ? o.nodeShape : void 0,
    borderWidth: o.borderWidth !== void 0 ? o.borderWidth : void 0,
    borderColor: o.borderColor !== void 0 ? o.borderColor : void 0,
    fontColor: o.fontColor !== void 0 ? o.fontColor : void 0,
    color: o.color !== void 0 ? o.color : void 0,
    opacity: o.opacity !== void 0 ? o.opacity : 1,
    fixed: o.fixed !== void 0 ? o.fixed : !1,
    width: o.width !== void 0 ? o.width : void 0,
    height: o.height !== void 0 ? o.height : void 0,
    x: o.x !== void 0 ? o.x : 0,
    y: o.y !== void 0 ? o.y : 0,
    offset_x: o.offset_x !== void 0 ? o.offset_x : 0,
    offset_y: o.offset_y !== void 0 ? o.offset_y : 0,
    expandHolderPosition: o.expandHolderPosition !== void 0 ? o.expandHolderPosition : void 0,
    innerHTML: o.innerHTML !== void 0 ? o.innerHTML : void 0,
    html: o.html !== void 0 ? o.html : void 0,
    disableDefaultClickEffect: o.disableDefaultClickEffect !== void 0 ? o.disableDefaultClickEffect : void 0,
    disableDrag: o.disableDrag !== void 0 ? o.disableDrag : !1,
    singleNode: !1,
    data: o.data !== void 0 ? o.data : {},
    isShow: !0,
    Fx: 0,
    Fy: 0,
    targetNodes: [],
    targetFrom: [],
    targetTo: [],
    lot: {
      childs: [],
      parent: void 0,
      eached: !1,
      strength: 0
    },
    el: { offsetWidth: 50, offsetHeight: 50 }
  };
  return t.width !== void 0 && (t.el.offsetWidth = t.width), t.height !== void 0 && (t.el.offsetHeight = t.height), t;
}, qe = [
  "Fx",
  "Fy",
  "appended",
  "el",
  "targetFrom",
  "targetNodes",
  "targetTo",
  "type",
  "lot",
  "seeks_id"
], Qe = (o) => {
  if (!o)
    return;
  const t = {};
  return Object.keys(o).forEach((e) => {
    qe.includes(e) || o[e] !== void 0 && (t[e] = o[e]);
  }), t;
};
class Ke {
  constructor(t, e) {
    S(this, "levelDistanceArr", []);
    S(this, "graphOptions");
    S(this, "layoutOptions");
    S(this, "rootNode");
    S(this, "allNodes", []);
    S(this, "__origin_nodes", []);
    this.layoutOptions = t, this.graphOptions = e, _("new SeeksBidirectionalTreeLayouter:", this.layoutOptions), this.layoutOptions.from || (this.layoutOptions.from = "left"), this.layoutOptions.levelDistance && typeof this.layoutOptions.levelDistance == "string" && (this.levelDistanceArr = this.layoutOptions.levelDistance.split(",").map((s) => Number.parseInt(s)));
  }
  refresh() {
    _(
      "SeeksBidirectionalTreeLayouter:refresh:nodes:",
      this.__origin_nodes.length
    ), this.placeNodes(this.__origin_nodes, this.rootNode);
  }
  analysisNodes4Didirectional(t, e, s, n, i) {
    e.length > n.max_length && (n.max_length = e.length), s > n.max_deep && (n.max_deep = s);
    const a = {
      level: s,
      all_size: e.length,
      all_strength: 0
    }, r = [];
    e.forEach((c) => {
      c.lot || (c.lot = { childs: [] }), c.lot.eached = !0, c.lot.subling = a, c.lot.level = s, t.push(c);
    });
    let l = 0;
    e.forEach((c) => {
      let h = 0;
      if (i === -1) {
        let d = 0;
        c.targetFrom.forEach((f) => {
          f.lot || (f.lot = { childs: [], eached: !1 }), f.lot.eached || (N.isAllowShowNode(f) ? (f.lot.eached = !0, f.lot.parent = c, f.lot.index_of_parent = d++, c.lot.childs.push(f), r.push(f), h++) : c.lot.childs.push(f));
        });
      } else {
        let d = 0;
        c.targetTo.forEach((f) => {
          f.lot || (f.lot = { childs: [], eached: !1 }), f.lot.eached || (N.isAllowShowNode(f) ? (f.lot.eached = !0, f.lot.parent = c, f.lot.index_of_parent = d++, c.lot.childs.push(f), r.push(f), h++) : c.lot.childs.push(f));
        });
      }
      c.lot.strength = h > 0 ? h : 1, a.all_strength += c.lot.strength, c.lot.strength_plus = a.all_strength, c.lot.index_of_level = l, c.lot.childs_size = h, l++;
    }), a.all_strength > n.max_strength && (n.max_strength = a.all_strength), r.length > 0 ? this.analysisNodes4Didirectional(
      t,
      r,
      s + i,
      n,
      i
    ) : (t.forEach((c) => {
      c.lot.childs_size && c.lot.childs_size > 0 && (c.lot.strengthWithChilds = 0);
    }), t.forEach((c) => {
      c.lot.childs_size === 0 && (c.lot.strengthWithChilds = 1, N.conductStrengthToParents(c));
    }), N.analysisDataTree([t[0]], 0, i));
  }
  placeNodes(t, e) {
    if (_("SeeksBidirectionalTreeLayouter:placeNodes"), e)
      _("layout by root:", e);
    else {
      console.error("root is null");
      return;
    }
    this.__origin_nodes = t, this.rootNode = e, t.forEach((n) => {
      n.lot.eached = !1, n.lot.notLeafNode = !1, n.lot.childs = [], n.lot.index_of_parent = 0, n.lot.strength = 0, n.lot.strengthWithChilds_from = 0, n.lot.strengthWithChilds = 0, n.lot.placed = !1;
    }), this.allNodes = [];
    let s = {
      max_deep: 1,
      max_length: 1,
      max_strength: 1
    };
    this.analysisNodes4Didirectional(
      this.allNodes,
      [this.rootNode],
      0,
      s,
      -1
    ), this.placeNodesPosition(this.rootNode, this.allNodes, s), this.allNodes = [], s = {
      max_deep: 1,
      max_length: 1,
      max_strength: 1
    }, this.analysisNodes4Didirectional(
      this.allNodes,
      [this.rootNode],
      0,
      s,
      1
    ), this.placeNodesPosition(this.rootNode, this.allNodes, s);
  }
  placeNodesPosition(t, e, s) {
    if (t.fixed !== !0) {
      const a = this.layoutOptions.centerOffset_x || 0, r = this.layoutOptions.centerOffset_y || 0, l = t.el.offsetWidth || t.width || 60, c = t.el.offsetHeight || t.height || 60;
      t.lot.x = -l / 2 + a, t.lot.y = -c / 2 + r, this.layoutOptions.from === "top" ? t.lot.y -= this.graphOptions.viewSize.height / 2 - c - 100 : this.layoutOptions.from === "bottom" ? t.lot.y += this.graphOptions.viewSize.height / 2 - c - 200 : this.layoutOptions.from === "right" ? t.lot.x += this.graphOptions.viewSize.width / 2 - l - 100 : t.lot.x -= this.graphOptions.viewSize.width / 2 - l - 100, _("graph offset:", a, r), _("create rootNode coordinates:", t.lot.x, t.lot.y), t.x = t.lot.x + 0, t.y = t.lot.y + 0;
    } else
      _("\u56FA\u5B9A\u4F4D\u7F6E\u7684rootNode:", t.text, t.x, t.y), t.origin_x === void 0 && (t.origin_x = t.x, t.origin_y = t.y), t.lot.x = t.origin_x, t.lot.y = t.origin_y, t.x = t.lot.x + 0, t.y = t.lot.y + 0, _("\u56FA\u5B9A\u4F4D\u7F6E\u7684rootNode:", t.text, t.x, t.y);
    t.lot.placed = !0, this.placeRelativePosition(t, s), e.forEach((a) => {
      if (a.fixed === !0) {
        a.lot.placed = !0;
        return;
      }
      if (!N.isAllowShowNode(a))
        return;
      const r = a.offset_x || 0, l = a.offset_y || 0;
      a.x = a.lot.x + r, a.y = a.lot.y + l, a.lot.placed = !0;
    });
  }
  placeRelativePosition(t, e) {
    const s = this.graphOptions.viewSize.width, n = this.graphOptions.viewSize.height;
    if (this.layoutOptions.from === "left" || this.layoutOptions.from === "right") {
      const i = this.layoutOptions.min_per_height || 80, a = this.layoutOptions.max_per_height || 400, r = this.layoutOptions.min_per_width || 430, l = this.layoutOptions.max_per_width || 650;
      let c = Math.round(
        (s - 10) / (e.max_deep + 2)
      );
      c < r && (c = r), c > l && (c = l);
      let h = Math.round(
        n / (e.max_strength + 1)
      );
      h < i && (h = i), h > a && (h = a), this.allNodes.forEach((d) => {
        d.fixed !== !0 && d.lot.placed !== !0 && d !== t && (this.layoutOptions.from === "right" ? d.lot.x = t.lot.x - this.getLevelDistance(
          d,
          d.lot.subling.level,
          c
        ) : d.lot.x = t.lot.x + this.getLevelDistance(
          d,
          d.lot.subling.level,
          c
        ));
      }), this.allNodes.forEach((d) => {
        d.fixed !== !0 && d.lot.level !== 0 && (d.lot.y = t.lot.y + h * (e.max_strength / -2 + d.lot.strengthWithChilds_from + d.lot.strengthWithChilds / 2));
      });
    } else {
      const i = this.layoutOptions.min_per_height || 250, a = this.layoutOptions.max_per_height || 400, r = this.layoutOptions.min_per_width || 250, l = this.layoutOptions.max_per_width || 500;
      let c = Math.round(
        (s - 10) / (e.max_strength + 2)
      );
      c < r && (c = r), c > l && (c = l);
      let h = Math.round(
        (n - 10) / (e.max_deep + 2)
      );
      h < i && (h = i), h > a && (h = a), this.allNodes.forEach((d) => {
        d.fixed !== !0 && d.lot.placed !== !0 && d !== t && (this.layoutOptions.from === "bottom" ? d.lot.y = t.lot.y - this.getLevelDistance(
          d,
          d.lot.subling.level,
          h
        ) : d.lot.y = t.lot.y + this.getLevelDistance(
          d,
          d.lot.subling.level,
          h
        ));
      }), this.allNodes.forEach((d) => {
        d.fixed !== !0 && d.lot.level !== 0 && (d.lot.x = t.lot.x + c * (e.max_strength / -2 + d.lot.strengthWithChilds_from + d.lot.strengthWithChilds / 2));
      });
    }
  }
  getLevelDistance(t, e, s) {
    if (this.levelDistanceArr && this.levelDistanceArr.length > 0) {
      let n = 0;
      for (let i = 0; i < e; i++) {
        const a = this.levelDistanceArr[i] || 100;
        n += a;
      }
      return n;
    } else
      return e * s;
  }
}
const et = Ke;
class tt extends fe {
  constructor(e, s) {
    super(e, s);
    S(this, "layoutOptions");
    this.layoutOptions = e;
  }
  refresh() {
    _("SeeksCenterLayouter:refresh"), this.placeNodes(this.__origin_nodes, this.rootNode);
  }
  placeNodes(e, s) {
    if (_("SeeksCenterLayouter:placeNodes"), !s) {
      _("root is null:", s);
      return;
    }
    _("layout by root:", s), this.__origin_nodes = e, this.rootNode = s, e.forEach((i) => {
      i.lot.eached = !1, i.lot.notLeafNode = !1, i.lot.childs = [], i.lot.index_of_parent = 0, i.lot.strength = 0, i.lot.placed = !1;
    }), this.allNodes = [];
    const n = {
      max_deep: 1,
      max_length: 1,
      max_strength: 1
    };
    N.analysisNodes4Didirectional(
      this.allNodes,
      [this.rootNode],
      0,
      n,
      0
    ), s.lot.x = -(s.el.offsetWidth || s.width || 60) / 2, s.lot.y = -(s.el.offsetHeight || s.height || 60) / 2, _("root position:", s.lot.x, s.lot.y), this.placeRelativePosition(this.rootNode, n), this.allNodes.forEach((i) => {
      if (i.fixed === !0 || !N.isAllowShowNode(i))
        return;
      const a = i.offset_x || 0, r = i.offset_y || 0;
      i.x = i.lot.x + a, i.y = i.lot.y + r, i.lot.placed = !0;
    }), _("Start Auto Layout.....");
  }
  placeRelativePosition(e, s) {
    const n = this.layoutOptions.distance_coefficient === void 0 ? 1 : this.layoutOptions.distance_coefficient;
    let i = Math.round(
      (this.graphOptions.viewSize.height + this.graphOptions.viewSize.width) / s.max_deep * 0.2
    ) * n;
    _(
      "analyticResult:",
      s,
      i,
      this.layoutOptions.distance_coefficient
    ), i < 150 * n && (i = 150 * n);
    let a = 0;
    this.allNodes.forEach((l) => {
      if (l.lot.subling && l.lot.subling.level === 1) {
        a = Math.round(
          l.lot.subling.all_size * 50 / Math.PI / 2
        ), a < i && (a = i);
        const c = N.getOvalPoint(
          e.lot.x,
          e.lot.y,
          l.lot.subling.level * a,
          l.lot.strength_plus - l.lot.strength / 2,
          l.lot.subling.all_strength
        );
        l.lot.x = c.x, l.lot.y = c.y;
      }
    });
    const r = Math.round(300 * n);
    this.allNodes.forEach((l) => {
      var c;
      if (l.lot.parent && l.lot.subling && l.lot.subling.level > 1) {
        const h = l.lot.parent.lot.strength_plus - l.lot.parent.lot.strength, f = (l.lot.parent.lot.strength_plus - h) / (l.lot.parent.lot.childs_size + 1) * (l.lot.index_of_parent + 1), C = N.getOvalPoint(
          e.lot.x,
          e.lot.y,
          (l.lot.subling.level - 1) * r + a,
          h + f,
          (c = l.lot.parent.lot.subling) == null ? void 0 : c.all_strength
        );
        l.lot.x = C.x, l.lot.y = C.y;
      }
    });
  }
}
const ot = tt;
class nt extends fe {
  constructor(e, s) {
    super(e, s);
    S(this, "__max_deep", 1);
    S(this, "__max_length", 1);
  }
  checkMaxDeepAndLength(e, s) {
    e.length > this.__max_length && (this.__max_length = e.length), s > this.__max_deep && (this.__max_deep = s);
    const n = {
      level: s,
      all_size: e.length,
      all_strength: 0
    }, i = [];
    e.forEach((r) => {
      r.lot || (r.lot = { childs: [] }), r.lot.eached = !0, r.lot.subling = n, this.allNodes.push(r);
    });
    let a = 0;
    e.forEach((r) => {
      let l = 0;
      r.targetNodes && (r.targetNodes.forEach((c) => {
        _("child node::", c.type, c.lot.eached), c.lot || (c.lot = { childs: [], eached: !1 }), c.type === "node" && c.targetNodes.length <= 1 ? c.lot.eached || (c.lot.parent = r, c.lot.index_of_p_childs = l, r.lot.childs.push(c), r.lot.eached = !0, i.push(c), l++) : c.lot.notLeafNode = !0;
      }), r.targetNodes.forEach((c) => {
        c.lot.notLeafNode && (c.lot || (c.lot = { childs: [], eached: !1 }), c.lot.eached || (c.lot.parent = r, c.lot.index_of_p_childs = l, r.lot.childs.push(c), r.lot.eached = !0, i.push(c), l++));
      })), r.lot.strength = l > 0 ? l : 1, n.all_strength += r.lot.strength, r.lot.strength_plus = n.all_strength, r.lot.level_index = a, r.lot.childs_size = l, a++;
    }), i.length > 0 && this.checkMaxDeepAndLength(i, s + 1);
  }
  refresh() {
    this.placeNodes(this.__origin_nodes, this.rootNode);
  }
  placeNodes(e, s) {
    if (s)
      _("layout by root:", s);
    else {
      _("root is null:", s);
      return;
    }
    this.__origin_nodes = e, this.rootNode = s, e.forEach((d) => {
      d.lot.eached = !1, d.lot.notLeafNode = !1, d.lot.childs = [], d.lot.parent = void 0, d.lot.index_of_p_childs = 0, d.lot.strength = 0;
    }), this.allNodes = [], _("max before:", this.__max_deep, this.__max_length), this.checkMaxDeepAndLength([this.rootNode], 0), _("max after:", this.__max_deep, this.__max_length);
    const n = this.graphOptions.viewSize.width, i = this.graphOptions.viewSize.height, a = this.graphOptions.canvasOffset.x, r = this.graphOptions.canvasOffset.y, l = {
      x: n / 2 - a,
      y: i / 2 - r
    };
    l.y > 800 - r && (l.y = 800 - r);
    const c = this.allNodes.length;
    let h = c * 90 / Math.PI / 2;
    h < 200 && (h = 200), h > 800 && (h = 800), this.allNodes.forEach((d, f) => {
      const C = N.getOvalPoint(
        l.x,
        l.y,
        h,
        f,
        c
      );
      d.x = C.x, d.y = C.y;
    }), _("Start Auto Layout.....");
  }
}
const st = nt;
class it {
  constructor(t, e) {
    S(this, "graphOptions");
    S(this, "layoutOptions");
    S(this, "rootNode");
    S(this, "allNodes", []);
    S(this, "__origin_nodes", []);
    this.layoutOptions = t, this.graphOptions = e;
  }
  refresh() {
    this.placeNodes(this.__origin_nodes, this.rootNode);
  }
  placeNodes(t, e) {
    if (!e) {
      _("root is null:", e);
      return;
    }
    _("layout by root:", e), this.__origin_nodes = t, this.rootNode = e, t.forEach((n) => {
      n.lot.eached = !1, n.lot.notLeafNode = !1, n.lot.childs = [], n.lot.index_of_parent = 0, n.lot.strength = 0, n.lot.placed = !1;
    }), this.allNodes = [];
    const s = {
      max_deep: 1,
      max_length: 1,
      max_strength: 1
    };
    N.analysisNodes4Didirectional(
      this.allNodes,
      [this.rootNode],
      0,
      s,
      0
    );
  }
}
const Le = (o, t) => {
  t.layoutClassName = o.layoutClassName, t.layoutLabel = o.label, t.layoutName = o.layoutName, t.layoutDirection = o.layoutDirection, o.useLayoutStyleOptions === !0 && (t.defaultExpandHolderPosition = o.defaultExpandHolderPosition, t.defaultJunctionPoint = o.defaultJunctionPoint, t.defaultNodeColor = o.defaultNodeColor, t.defaultNodeFontColor = o.defaultNodeFontColor, t.defaultNodeBorderColor = o.defaultNodeBorderColor, t.defaultNodeBorderWidth = o.defaultNodeBorderWidth, t.defaultLineColor = o.defaultLineColor, t.defaultLineWidth = o.defaultLineWidth, t.defaultLineShape = o.defaultLineShape, t.defaultNodeShape = o.defaultNodeShape, t.defaultNodeWidth = o.defaultNodeWidth, t.defaultNodeHeight = o.defaultNodeHeight, t.defaultLineMarker = o.defaultLineMarker, t.defaultShowLineLabel = o.defaultShowLineLabel);
  let e;
  return o.layoutName === "SeeksBidirectionalTreeLayouter" || o.layoutName === "tree" ? e = new et(o, t) : o.layoutName === "SeeksCenterLayouter" || o.layoutName === "center" ? e = new ot(o, t) : o.layoutName === "SeeksCircleLayouter" || o.layoutName === "circle" ? e = new st(o, t) : o.layoutName === "SeeksForceLayouter" || o.layoutName === "force" ? e = new fe(o, t) : (o.layoutName === "SeeksFixedLayouter" || o.layoutName === "fixed") && (e = new it(o, t)), t.isNeedShowAutoLayoutButton = o.allowAutoLayoutIfSupport !== !1 && e.autoLayout !== void 0, e;
}, at = (o, t) => {
  const e = t.layouter ? t.layouter.__origin_nodes : [], s = t.layouter ? t.layouter.rootNode : void 0;
  let n = o;
  if (typeof o == "string") {
    for (const i in t.layouts)
      if (i === o) {
        n = i;
        break;
      }
  }
  _("[change layout]switchLayout"), t.layouter = Le(n, t), t.layouter && (t.layouter.__origin_nodes = e, t.layouter.rootNode = s);
};
let lt = 0;
class rt {
  constructor(t, e) {
    S(this, "instanceId", "");
    S(this, "options");
    S(this, "listeners");
    this.listeners = e, this.options = ge(t), this.enableDebugLog(this.options.debug), this.instanceId = `RGIns-${lt++}`, this.options.instanceId = this.instanceId, _("new RelationGraph:", this);
  }
  enableDebugLog(t) {
    this.options.debug = t, window && (window.relationGraphDebug = t);
  }
  refreshNVAnalysisInfo() {
    _("[interface]refreshNVAnalysisInfo");
  }
  resetViewSize() {
    _("[interface]resetViewSize");
  }
  doLayout() {
    _("[interface]doLayout");
  }
}
let ee = { x: 0, y: 0 };
const te = { x: 0, y: 0 }, oe = { x: 0, y: 0 };
let pe, _e;
const xe = (o) => {
  const t = {
    clientX: 0,
    clientY: 0
  };
  if (ie) {
    const e = o, s = e.touches || e.targetTouches;
    if (!s)
      throw new Error("error targetTouches");
    t.clientX = s[0].clientX, t.clientY = s[0].clientY;
  } else {
    const e = o;
    t.clientX = e.clientX, t.clientY = e.clientY;
  }
  return t;
}, Z = {
  startDrag(o, t, e, s) {
    s ? pe = (n, i, a) => {
      const r = n - oe.x, l = i - oe.y;
      s(
        r,
        l,
        te,
        oe,
        a
      );
    } : pe = (n, i) => {
      ee.x = te.x + (n - oe.x), ee.y = te.y + (i - oe.y);
    }, _e = e, ee = t, te.x = ee.x, te.y = ee.y, _("[canvas]onDragStart...", ie, o);
    try {
      const n = xe(o);
      oe.x = n.clientX, oe.y = n.clientY, ie ? (o.preventDefault(), document.body.addEventListener("touchmove", Z.onNodeMove), document.body.addEventListener("touchend", Z.onNodeDragend)) : (document.body.addEventListener("mousemove", Z.onNodeMove), document.body.addEventListener("mouseup", Z.onNodeDragend));
    } catch (n) {
      console.error(n.message);
    }
  },
  onNodeMove(o) {
    const t = xe(o);
    pe(t.clientX, t.clientY, o);
  },
  onNodeDragend(o) {
    ie ? (document.body.removeEventListener("touchmove", Z.onNodeMove), document.body.removeEventListener("touchend", Z.onNodeDragend)) : (document.body.removeEventListener("mousemove", Z.onNodeMove), document.body.removeEventListener("mouseup", Z.onNodeDragend)), _("Node dragend"), _e && _e(
      ee.x - te.x,
      ee.y - te.y,
      o
    );
  },
  getColorId(o) {
    return o = o.replace("#", ""), o = o.replace("(", ""), o = o.replace(")", ""), o = o.replace(/,/, "-"), o;
  }
}, me = Z;
class ct extends rt {
  constructor(e, s) {
    super(e, s);
    S(this, "graphData", {
      rootNode: void 0,
      nodes: [],
      links: []
    });
    S(this, "tmpData", {
      nodes_map: {},
      links_map: {}
    });
    S(this, "seeksNodeIdIndex", 0);
    S(this, "allLineColors", []);
    S(this, "userLayouerClass");
  }
  ready() {
    this.initLayouter(), this.resetViewSize(), this.refreshNVAnalysisInfo();
  }
  setOptions(e, s) {
    this.options = ge(e), this.enableDebugLog(this.options.debug), this.options.instanceId = this.instanceId, this.initLayouter(), this.resetViewSize(), this.doLayout(), this.resetViewSize(), s && s(this);
  }
  setLayouter(e) {
    _("setLayouterClass::", e), this.userLayouerClass = e;
  }
  initLayouter() {
    if (this.userLayouerClass)
      _("Use user layouter:", this.userLayouerClass), this.options.layouter = this.userLayouerClass;
    else if (this.options.layouts && this.options.layouts.length > 0) {
      const e = this.options.layouts[0];
      _(
        "[change layout]Create default layouter\uFF1A",
        this.options.layoutName
      ), e.layouter ? this.options.layouter = e.layouter : this.options.layouter = Le(
        e,
        this.options
      );
    } else
      _("\u4F60\u9700\u8981\u8BBE\u7F6Elayouts\u6765\u6307\u5B9A\u5F53\u524D\u56FE\u8C31\u53EF\u4EE5\u4F7F\u7528\u7684\u5E03\u5C40\u5668\uFF01");
    _("Layouter instance:", this.options.layouter);
  }
  setJsonData(e, s, n) {
    arguments.length === 2 && typeof s == "function" && (n = s, s = !0), this.graphData.nodes = [], this.graphData.links = [], this.tmpData.nodes_map = {}, this.tmpData.links_map = {}, this.graphData.rootNode = void 0, _("set jsonData:", e);
    const i = e.rootId;
    this.loadGraphJsonData(e), i && (this.graphData.rootNode = this.tmpData.nodes_map[i]), !this.graphData.rootNode && this.graphData.nodes.length > 0 && (this.graphData.rootNode = this.graphData.nodes[0]), this.applyNewDataToCanvas(), s && (_("resetViewSize:", s), this.resetViewSize()), setTimeout(() => {
      this.doLayout(), n && n(this);
    }, 500);
  }
  applyNewDataToCanvas() {
    if (this.graphData.rootNode)
      this.options.defaultFocusRootNode && this.setCheckedNode(this.graphData.rootNode.id);
    else
      throw new Error("\u6CA1\u6709\u8BBE\u7F6E\u6839\u8282\u70B9[rootId]\uFF01\u4E5F\u65E0\u6CD5\u83B7\u53D6\u6839\u8282\u70B9!");
  }
  appendJsonData(e, s, n) {
    arguments.length === 2 && typeof s == "function" && (n = s, s = !0), _("appendData:", e), this.loadGraphJsonData(e), this.applyNewDataToCanvas(), s && this.doLayout(), n && n(this);
  }
  loadNodes(e) {
    e.forEach((s) => {
      let n = Ue(s), i = !1;
      this.tmpData.nodes_map[n.id] ? n = this.tmpData.nodes_map[n.id] : i = !0, i && (this.tmpData.nodes_map[n.id] = n, this.graphData.nodes.push(n), n.seeks_id = this.seeksNodeIdIndex++);
    });
  }
  loadLines(e) {
    e.forEach((s) => {
      let n = !1, i, a;
      if (typeof s.from == "object" ? i = s.from : i = this.tmpData.nodes_map[s.from], typeof s.to == "object" ? a = s.to : a = this.tmpData.nodes_map[s.to], !i) {
        console.error("\u627E\u4E0D\u5230from:", s);
        return;
      }
      if (!a) {
        console.error("\u627E\u4E0D\u5230to:", s);
        return;
      }
      const r = `${i.seeks_id}-${a.seeks_id}`, l = `${a.seeks_id}-${i.seeks_id}`, c = Je(s);
      let h, d = !1;
      this.tmpData.links_map[r] ? h = this.tmpData.links_map[r] : this.tmpData.links_map[l] ? (h = this.tmpData.links_map[l], d = !0) : (n = !0, h = {
        seeks_id: r,
        fromNode: i,
        toNode: a,
        appended: !1,
        relations: []
      });
      let f = c.arrow;
      c.isHideArrow || (f = this.getLineArrow(c.color)), i.targetNodes || (i.targetNodes = []), a.targetNodes || (a.targetNodes = []), i.targetNodes.includes(a) || i.targetNodes.push(a), a.targetNodes.includes(i) || a.targetNodes.push(i), i.targetTo.includes(a) || i.targetTo.push(a), a.targetFrom.includes(i) || a.targetFrom.push(i), c.seeks_id = `${h.seeks_id}-${h.relations.length}`, c.isReverse = d, c.arrow = f, h.relations.push(c), n && (this.graphData.links.push(h), this.tmpData.links_map[r] = h, h.appended = !1);
    });
  }
  flatNodeData(e, s, n, i) {
    e.forEach((a) => {
      n.push(a), s && i.push({
        from: s.id,
        to: a.id
      });
      const r = a.children;
      r && r.length > 0 && this.flatNodeData(r, a, n, i);
    });
  }
  loadGraphJsonData(e) {
    if (!e.lines) {
      console.error(
        "[relation-graph] For compatibility with older versionsm, Use jsonData.relations as jsonData.lines, It is recommended that you define your data using"
      );
      return;
    }
    const s = [], n = [];
    this.flatNodeData(e.nodes, null, s, n), e.lines.forEach((i) => {
      n.push(i);
    }), this.loadNodes(s), _("Nodes is initialized"), this.loadLines(n);
  }
  getLineArrow(e, s = !1, n = !1) {
    const i = s ? "start-" : "";
    if (n)
      return `${this.options.instanceId}-${i}arrow-checked`;
    if (e) {
      const a = me.getColorId(e);
      return this.allLineColors.map((r) => r.id).includes(a) || this.allLineColors.push({ id: a, color: e }), `${this.options.instanceId}-${i}arrow-${a}`;
    } else
      return `${this.options.instanceId}-${i}arrow-default`;
  }
  getNodes() {
    return this.graphData.nodes;
  }
  getLinks() {
    return this.graphData.links;
  }
  getGraphJsonData() {
    const e = [], s = [];
    return this.graphData.nodes.forEach((n) => {
      const i = Qe(n);
      i && e.push(i);
    }), this.graphData.links.forEach((n) => {
      je(n, s);
    }), {
      rootId: this.graphData.rootNode ? this.graphData.rootNode.id : "",
      nodes: e,
      lines: s
    };
  }
  getGraphJsonOptions() {
    const e = {}, s = [
      "layouter",
      "autoLayouting",
      "canvasNVInfo",
      "canvasOffset",
      "canvasZoom",
      "fullscreen",
      "instanceId",
      "layoutClassName",
      "layoutDirection",
      "layoutLabel",
      "layoutName",
      "resetViewSize",
      "viewELSize",
      "viewNVInfo",
      "viewSize",
      "canvasSize"
    ];
    return Object.keys(this.options).forEach((n) => {
      s.includes(n) || (e[n] = this.options[n]);
    }), e;
  }
  printGraphJsonData() {
    _("graph options:", JSON.stringify(this.getGraphJsonOptions())), _("graph json data:", JSON.stringify(this.getGraphJsonData()));
  }
  setCheckedNode(e) {
    this.options.checkedNodeId = e;
  }
  setCheckedLine(e) {
    this.options.checkedLineId = e;
  }
  selectNode(e, s) {
    e.selected = s;
  }
  getNodeById(e) {
    for (let s = 0; s < this.graphData.nodes.length; s++)
      if (this.graphData.nodes[s].id === e)
        return this.graphData.nodes[s];
  }
  addNodes(e, s = !1) {
    this.loadNodes(e), s && this.doLayout();
  }
  addLines(e, s = !1) {
    this.loadLines(e), s && this.doLayout();
  }
  removeNodeById(e) {
    let s = 0;
    for (let i = 0; i < this.graphData.links.length; i++) {
      const a = this.graphData.links[i];
      (a.fromNode.id === e || a.toNode.id === e) && (this.graphData.links.splice(i, 1), i--, s++);
    }
    _("\u5220\u9664\u5BF9\u5E94\u7684\u7EBF\u4E2A\u6570\uFF1A", e, s);
    let n = 0;
    for (let i = 0; i < this.graphData.nodes.length; i++)
      if (this.graphData.nodes[i].id === e) {
        const a = this.graphData.nodes[i];
        a.targetNodes.forEach((r) => {
          const l = r.targetNodes.indexOf(a);
          l !== -1 && r.targetNodes.splice(l, 1);
        }), this.graphData.nodes.splice(i, 1), delete this.tmpData.nodes_map[a.id], n++;
        break;
      }
    _("\u5220\u9664\u5BF9\u5E94\u7684\u8282\u70B9\u4E2A\u6570\uFF1A", e, n);
  }
  removeLinkById(e, s) {
    for (let n = 0; n < this.graphData.links.length; n++) {
      const i = this.graphData.links[n];
      (i.fromNode.id === e || i.toNode.id === s) && (this.graphData.links.splice(n, 1), n--);
    }
  }
  setNodePosition(e, s, n) {
    e.x = s, e.y = n;
  }
}
class dt extends ct {
  constructor(e, s) {
    super(e, s);
    S(this, "$dom");
    S(this, "$canvasDom");
  }
  setDom(e) {
    this.$dom = e;
  }
  setCanvasDom(e) {
    this.$canvasDom = e;
  }
  fullscreen(e) {
    e === void 0 ? (this.options.fullscreen = !this.options.fullscreen, de.toggle(this.$dom).then(() => {
      setTimeout(() => {
        this.refreshNVAnalysisInfo();
      }, 1e3);
    })) : (this.options.fullscreen = e, setTimeout(() => {
      this.refreshNVAnalysisInfo();
    }, 1e3));
  }
}
class ht extends dt {
  constructor(e, s) {
    super(e, s);
    S(this, "zoomCenter_of_newSize", { x: 0, y: 0 });
  }
  zoom(e, s) {
    if (this.options.canvasZoom + e < 10)
      return;
    const n = this.options.canvasZoom + e, i = this.showZoomCenter(e, s);
    if (!i) {
      _("Can not zoom");
      return;
    }
    this.options.canvasOffset.x += i.buff_x, this.options.canvasOffset.y += i.buff_y, this.options.canvasZoom = n, this.refreshNVAnalysisInfo();
  }
  setZoom(e, s) {
    const n = Math.floor(e - this.options.canvasZoom);
    this.zoom(n, s);
  }
  showZoomCenter(e, s) {
    if (!this.$dom)
      return;
    const n = this.options.canvasZoom / 100, i = (this.options.canvasZoom + e) / 100, a = this.analysisByZoom(n, s), r = this.analysisByZoom(i, s), l = i / n, c = 0, h = 0, d = i / n, f = 0, C = 0;
    this.zoomCenter_of_newSize.x = l * a.NMViewBuff.x + h * a.NMViewBuff.y + f, this.zoomCenter_of_newSize.y = c * a.NMViewBuff.x + d * a.NMViewBuff.y + C;
    const x = a.NMViewBuff.x - this.zoomCenter_of_newSize.x, m = a.NMViewBuff.y - this.zoomCenter_of_newSize.y;
    this.zoomCenter_of_newSize.x += a.NMCanvasCenter.x, this.zoomCenter_of_newSize.y += a.NMCanvasCenter.y;
    let g = a.NMCanvasStart.x - a.NMCanvasCenter.x, y = a.NMCanvasStart.y - a.NMCanvasCenter.y, $ = l * g + h * y + f, M = c * g + d * y + C;
    return r.NMCanvasStart.x = x + a.NMCanvasCenter.x + $, r.NMCanvasStart.y = x + a.NMCanvasCenter.y + M, g = a.NMCanvasEnd.x - a.NMCanvasCenter.x, y = a.NMCanvasEnd.y - a.NMCanvasCenter.y, $ = l * g + h * y + f, M = c * g + d * y + C, r.NMCanvasEnd.x = x + a.NMCanvasCenter.x + $, r.NMCanvasEnd.y = x + a.NMCanvasCenter.y + M, a.NMCanvasOffsetBuff.x = x, a.NMCanvasOffsetBuff.y = m, {
      buff_x: x,
      buff_y: m
    };
  }
  analysisByZoom(e, s) {
    const n = {
      NMViewPosition: { x: 0, y: 0 },
      NMViewCenter: { x: 0, y: 0 },
      NMCanvasCenter: { x: 0, y: 0 },
      NMCanvasStart: { x: 0, y: 0 },
      NMCanvasEnd: { x: 0, y: 0 },
      NMZoomCenter: { x: 0, y: 0 },
      NMViewBuff: { x: 0, y: 0 },
      NMCanvasOffsetBuff: { x: 0, y: 0 },
      NMCanvasSize: { width: 0, height: 0 }
    }, i = Ge(), a = Re(), r = this.$dom.getBoundingClientRect();
    n.NMViewPosition.x = r.left, n.NMViewPosition.y = r.top, r.width + n.NMViewPosition.x > i ? n.NMViewCenter.x = (i - r.left) / 2 : n.NMViewCenter.x = r.width / 2, r.height + n.NMViewPosition.y > a ? n.NMViewCenter.y = (a - r.top) / 2 : n.NMViewCenter.y = r.height / 2;
    const l = this.options.canvasSize.width * e, c = this.options.canvasSize.height * e;
    n.NMCanvasCenter.x = this.options.canvasOffset.x + this.options.canvasSize.width / 2, n.NMCanvasCenter.y = this.options.canvasOffset.y + this.options.canvasSize.height / 2, n.NMCanvasStart.x = n.NMCanvasCenter.x - l / 2, n.NMCanvasStart.y = n.NMCanvasCenter.y - c / 2, n.NMCanvasEnd.x = n.NMCanvasCenter.x + l / 2, n.NMCanvasEnd.y = n.NMCanvasCenter.y + c / 2, n.NMZoomCenter.x = n.NMViewCenter.x, n.NMZoomCenter.y = n.NMViewCenter.y, s && (n.NMZoomCenter.x = s.x - n.NMViewPosition.x, n.NMZoomCenter.y = s.y - n.NMViewPosition.y);
    let h = n.NMViewCenter.x - n.NMCanvasCenter.x, d = n.NMViewCenter.y - n.NMCanvasCenter.y;
    return s && (h = n.NMZoomCenter.x - n.NMCanvasCenter.x, d = n.NMZoomCenter.y - n.NMCanvasCenter.y), n.NMViewBuff.x = h, n.NMViewBuff.y = d, n.NMCanvasSize.width = l, n.NMCanvasSize.height = c, n;
  }
}
class ut extends ht {
  constructor(t, e) {
    super(t, e);
  }
  doLayout() {
    if (!this.options.layouter) {
      _("no layouter");
      return;
    }
    if (!this.graphData.rootNode) {
      _("Cant find rootNode!");
      return;
    }
    _("node size\uFF1A", this.graphData.nodes.length), this.options.layouter.placeNodes(
      this.graphData.nodes,
      this.graphData.rootNode
    );
  }
  refresh(t) {
    this.resetViewSize(), this.options.layouter && this.options.layouter.refresh(), this.playShowEffect(t);
  }
  resetViewSize() {
    !this.options || (_("resetViewSize"), this.options.viewSize.width = this.$dom.getBoundingClientRect().width, this.options.viewSize.height = this.$dom.getBoundingClientRect().height, this.options.canvasZoom = 100, this.options.canvasOffset.x = this.options.viewNVInfo.width / 2, this.options.canvasOffset.y = this.options.viewNVInfo.height / 2, this.refreshNVAnalysisInfo());
  }
  dataUpdated() {
    this.options.canvasOffset.x += 1, this.options.canvasOffset.y += 1, this.options.canvasOffset.x -= 1, this.options.canvasOffset.y -= 1;
  }
  refreshNVAnalysisInfo() {
    if (!this.$dom) {
      console.error("cannot get view size !");
      return;
    }
    const t = {
      NMCanvasCenter: { x: 0, y: 0 }
    }, e = this.$dom.getBoundingClientRect();
    this.options.viewNVInfo.x = e.left, this.options.viewNVInfo.y = e.top, this.options.viewNVInfo.width = e.width, this.options.viewNVInfo.height = e.height;
    const s = this.options.canvasSize.width * (this.options.canvasZoom / 100), n = this.options.canvasSize.height * (this.options.canvasZoom / 100);
    t.NMCanvasCenter.x = this.options.canvasOffset.x + this.options.canvasSize.width / 2, t.NMCanvasCenter.y = this.options.canvasOffset.y + this.options.canvasSize.height / 2, this.options.canvasNVInfo.x = t.NMCanvasCenter.x - s / 2, this.options.canvasNVInfo.y = t.NMCanvasCenter.y - n / 2, this.options.canvasNVInfo.width = s, this.options.canvasNVInfo.height = n, this.options.viewELSize.width = e.width, this.options.viewELSize.height = e.height, this.options.viewELSize.left = e.left, this.options.viewELSize.top = e.top;
  }
  getStuffSize() {
    let t = 9999999, e = 9999999, s = 0, n = 0;
    this.graphData.nodes.forEach((l) => {
      l.x < t && (t = l.x), l.x > s && (s = l.x + l.el.offsetWidth), l.y < e && (e = l.y), l.y > n && (n = l.y + l.el.offsetHeight);
    });
    const i = 100, a = s - t + i, r = n - e + i;
    return {
      width: a,
      height: r,
      minX: t,
      maxX: s,
      minY: e,
      maxY: n
    };
  }
  getNodesCenter() {
    const t = this.getStuffSize();
    _("getStuffSize:", t);
    const e = t.minX + (t.width - 100) / 2, s = t.minY + (t.height - 100) / 2;
    return {
      x: e,
      y: s
    };
  }
  setCanvasCenter(t, e) {
    const s = this.options.viewSize.width / 2, n = this.options.viewSize.height / 2;
    this.setCanvasOffset(s - t, n - e);
  }
  setCanvasOffset(t, e) {
    this.options.canvasOffset.x = t, this.options.canvasOffset.y = e;
  }
  playShowEffect(t) {
    if (this.graphData.nodes.length === 0) {
      _("relation-graph:move to center: data not ready!");
      return;
    }
    if (_(
      "playShowEffect:",
      this.options.moveToCenterWhenRefresh,
      this.options.zoomToFitWhenRefresh
    ), this.options.moveToCenterWhenRefresh)
      if (this.options.useAnimationWhenRefresh) {
        const e = this.getNodesCenter();
        _("center:", e.x, e.y);
        const s = this.options.viewSize.width / 2 - e.x, n = this.options.viewSize.height / 2 - e.y;
        this.animateGoto(s, n, 500, () => {
          this.zoomToFitWhenRefresh(t);
        });
      } else {
        const e = this.getNodesCenter();
        this.setCanvasCenter(e.x, e.y), this.zoomToFitWhenRefresh(t);
      }
    else
      this.zoomToFitWhenRefresh(t);
    if (!this.graphData.rootNode || Number.isNaN(this.graphData.rootNode.x)) {
      _("rootNode.x is NaN, graph is currently hidden?");
      return;
    }
    this.options.layoutName !== "force" && this.placeSingleNode();
  }
  zoomToFitWhenRefresh(t) {
    this.options.zoomToFitWhenRefresh ? this.zoomToFit(t) : t && t(this);
  }
  placeSingleNode() {
    let t = 0;
    if (this.graphData.nodes.forEach((e) => {
      e.id !== this.graphData.rootNode.id && (Number.isNaN(e.x) || e.x === 0) && (Number.isNaN(e.y) || e.y === 0) && (e.x = Math.floor(Math.random() * 200) - 100, e.y = Math.floor(Math.random() * 200) - 100, e.singleNode = !0, e.lot.placed = !0, t++);
    }), t > 0) {
      _("sigle nodes:", t);
      const e = ge({}), s = new fe(
        { layoutName: "FixSingleNodes" },
        e
      );
      s.__origin_nodes = this.graphData.nodes, s.justLayoutSingleNode = !0, s.byLine = !1, s.maxLayoutTimes = 100, s.autoLayout();
    }
  }
  zoomToFit(t) {
    const e = this.getStuffSize(), s = this.options.viewSize.width / e.width, n = this.options.viewSize.height / e.height, i = Math.min(s, n, 1);
    _("animateToZoom:", {
      stuffSize: e,
      zoomPercent: i,
      zoomPercentX: s,
      zoomPercentY: n,
      viewSize: this.options.viewSize
    }), this.options.useAnimationWhenRefresh ? this.animateToZoom(i * 100, 300, t) : (this.setZoom(i * 100), t && t(this));
  }
  animateGoto(t, e, s, n) {
    _("animateGoto:", t, e);
    const i = t - this.options.canvasOffset.x, a = e - this.options.canvasOffset.y, r = s, l = 5, c = Math.round(i / l), h = Math.round(a / l), d = r / l;
    this.animateStepAction(
      0,
      d,
      l,
      () => {
        this.options.canvasOffset.x += c, this.options.canvasOffset.y += h;
      },
      () => {
        n && n(this);
      }
    );
  }
  animateToZoom(t, e, s) {
    const n = t - this.options.canvasZoom, i = e, a = 5, r = Math.round(n / a), l = i / a;
    _("animateToZoom:", n, r), this.animateStepAction(
      0,
      l,
      a,
      () => {
        this.zoom(r);
      },
      () => {
        this.setZoom(t), s && s(this);
      }
    );
  }
  animateStepAction(t, e, s, n, i) {
    t < s ? (n(t, s), setTimeout(() => {
      this.animateStepAction(
        t + 1,
        e,
        s,
        n,
        i
      );
    }, e)) : i();
  }
  startAutoLayout() {
    this.options.autoLayouting = !this.options.autoLayouting, this.options.layouter && (this.options.autoLayouting ? this.options.layouter.autoLayout ? this.options.layouter.autoLayout(!0) : console.log("\u5F53\u524D\u5E03\u5C40\u4E0D\u652F\u6301\u81EA\u52A8\u5E03\u5C40\uFF01") : this.options.layouter.stop ? this.options.layouter.stop() : console.log("\u5F53\u524D\u5E03\u5C40\u4E0D\u652F\u6301\u81EA\u52A8\u5E03\u5C40stop\uFF01"));
  }
  stopAutoLayout() {
    this.options.autoLayouting = !1, this.options.layouter && (this.options.layouter.stop ? this.options.layouter.stop() : console.log("\u5F53\u524D\u5E03\u5C40\u4E0D\u652F\u6301\u81EA\u52A8\u5E03\u5C40stop\uFF01"));
  }
}
class ft extends ut {
  constructor(t, e) {
    super(t, e);
  }
  setDefaultLineShape(t) {
    this.options.defaultLineShape = t;
  }
  setDefaultJunctionPoint(t) {
    this.options.defaultJunctionPoint = t;
  }
  updateNodeOffsetSize(t, e, s) {
    t.el.offsetWidth = e, t.el.offsetHeight = s;
  }
  onNodeClick(t, e) {
    _("onNodeClick:", t), this.options.disableNodeClickEffect !== !0 && t.disableDefaultClickEffect !== !0 && this.setCheckedNode(t.id), this.listeners["on-node-click"] && this.listeners["on-node-click"](t, e);
  }
  onLineClick(t, e, s) {
    _("onLineClick:", "line:", t, "link:", e), this.options.disableLineClickEffect !== !0 && t.disableDefaultClickEffect !== !0 && (this.setCheckedLine(e.seeks_id), this.selectNode(e.fromNode, !0), this.selectNode(e.toNode, !0), setTimeout(() => {
      this.selectNode(e.fromNode, !1), this.selectNode(e.toNode, !1);
    }, 2e3)), this.listeners["on-line-click"] && this.listeners["on-line-click"](t, e, s);
  }
  expandOrCollapseNode(t, e) {
    t.expanded === !1 ? this.expandNode(t, e) : this.collapseNode(t, e);
  }
  expandNode(t, e) {
    _("onNodeExpand:", t), t.expanded = !0, t.lot.childs.forEach((s) => {
      s.isShow = !0;
    }), this.listeners["on-node-expand"] && this.listeners["on-node-expand"](t, e);
  }
  collapseNode(t, e) {
    _("onNodeCollapse:", t), t.expanded = !1, t.lot.childs.forEach((s) => {
      s.isShow = !1;
    }), this.listeners["on-node-collapse"] && this.listeners["on-node-collapse"](t, e);
  }
  focusRootNode() {
    _("relation-graph:focusRootNode"), this.graphData.rootNode && this.handleSelect(this.graphData.rootNode);
  }
  focusNodeById(t) {
    this.graphData.nodes.forEach((e) => {
      e.id === t && this.handleSelect(e);
    });
  }
  querySearchAsync(t, e) {
    if (_("fetch-suggestions", t), t = t.trim(), t === "")
      return;
    const s = [];
    this.graphData.nodes.forEach((n) => {
      _("fetch:", n.text), n.text.includes(t) && s.push(n);
    }), _("fetched:", s.length), e(s);
  }
  handleSelect(t) {
    _("checked:", t), scrollTo({
      top: this.$dom.offsetTop
    }), this.animateToZoom(100, 300, () => {
      const e = t.width || 50, s = t.height || 50, n = t.x * -1 + this.options.viewSize.width / 2 - e / 2, i = t.y * -1 + this.options.viewSize.height / 2 - s / 2;
      this.animateGoto(n, i, 500, () => {
        this.options.checkedNodeId = t.id, this.refreshNVAnalysisInfo();
      });
    });
  }
}
class pt extends ft {
  constructor(t, e) {
    super(t, e);
  }
  dataURLToBlob(t) {
    const e = t.split(","), s = e[0].match(/:(.*?);/)[1], n = atob(e[1]);
    let i = n.length;
    const a = new Uint8Array(i);
    for (; i--; )
      a[i] = n.charCodeAt(i);
    return new Blob([a], { type: s });
  }
  downloadAsImage(t, e = "png") {
    if (this.listeners["on-image-download"] && this.listeners["on-image-download"](
      this.$canvasDom,
      e
    ) === !1)
      return;
    if (this.graphData.nodes.length === 0)
      throw new Error("\u6CA1\u6709\u8282\u70B9\uFF0C\u6CA1\u6709\u5185\u5BB9\u9700\u8981\u5BFC\u51FA\uFF01");
    e || (e = "png"), t || (t = this.options.downloadImageFileName), t || (t = `SeeksRelationGraph-${(Math.random() * 1e5).toFixed(0)}`), this.options.checkedNodeId = "";
    const s = this.options.canvasZoom;
    this.options.canvasZoom = 100;
    const n = this.$canvasDom, i = n.clientWidth, a = n.clientHeight;
    let r = 999999, l = 999999, c = 0, h = 0;
    const d = 100;
    this.graphData.nodes.forEach((k) => {
      k.x < r && (r = k.x), k.x > c && (c = k.x + k.el.offsetWidth), k.y < l && (l = k.y), k.y > h && (h = k.y + k.el.offsetHeight);
    });
    const f = r - d, C = l - d;
    this.graphData.nodes.forEach((k) => {
      k.x = k.x - f, k.y = k.y - C;
    });
    const x = this.options.canvasOffset.x, m = this.options.canvasOffset.y;
    this.options.canvasOffset.x = d * -1, this.options.canvasOffset.y = d * -1, _("offset:", {
      _origin_offset_x: x,
      _origin_offset_y: m,
      _min_x: r,
      _min_y: l,
      _max_x: c,
      _max_y: h
    });
    const g = c - r + 200 + d * 2, y = h - l + 100 + d * 2, $ = window.devicePixelRatio;
    this.options.canvasSize.width = g * $, this.options.canvasSize.height = y * $;
    const M = {
      left: this.$dom.offsetLeft - n.getBoundingClientRect().left,
      top: this.$dom.offsetTop - n.getBoundingClientRect().top,
      canvas_offsetLeft: n.offsetLeft,
      canvas_offsetTop: n.offsetTop,
      canvas_left: n.getBoundingClientRect().left,
      canvas_top: n.getBoundingClientRect().top
    };
    window.scrollTo(0, 0), _("export image:", {
      relationGraphPosition: M,
      orign_width: i,
      orign_height: a,
      _image_width: g,
      _image_height: y,
      _min_x: r,
      _min_y: l,
      _max_x: c,
      _max_y: h,
      devicePixelRatio: window.devicePixelRatio
    });
    const b = document.createElement("canvas");
    b.width = g * $, b.height = y * $, b.style.backgroundColor = getComputedStyle(
      n.parentElement,
      null
    ).backgroundColor, _("canvas.style.backgroundColor:", b.style.backgroundColor), b.style.width = `${g * $}px`, b.style.height = `${y * $}px`, b.getContext("2d").scale(1, 1);
    const W = {
      backgroundColor: b.style.backgroundColor,
      scale: $,
      canvas: b,
      logging: !0,
      width: g,
      height: y,
      useCORS: !0
    };
    setTimeout(() => {
      this.createImage(n, W, e, t, () => {
        this.options.canvasSize.width = i, this.options.canvasSize.height = a, this.options.canvasOffset.x = x, this.options.canvasOffset.y = m, this.options.canvasZoom = s, this.graphData.nodes.forEach((k) => {
          k.x = k.x + f, k.y = k.y + C;
        });
      });
    }, 1e3);
  }
  createImage(t, e, s, n, i) {
    _("html2canvas:", e, s, n), We(t, e).then((a) => {
      const r = document.body.appendChild(a);
      r.style.display = "none";
      const l = this.dataURLToBlob(r.toDataURL(`image/${s}`));
      document.body.removeChild(r);
      const c = document.createElement("a");
      c.style.display = "none";
      try {
        window.navigator.msSaveOrOpenBlob ? window.navigator.msSaveOrOpenBlob(l, `${n}.${s}`) : (c.setAttribute("href", URL.createObjectURL(l)), c.setAttribute("download", `${n}.${s}`), document.body.appendChild(c), c.click(), _("click ok!"), URL.revokeObjectURL(l), _("revokeObjectURL ok!"), document.body.removeChild(c), _("removeChild ok!")), i && i();
      } catch (h) {
        _("[SEEKS Graph]Create and download image error:", h);
      }
    });
  }
}
class _t extends pt {
  constructor(t, e) {
    super(t, e);
  }
  createReturnValue(t, e) {
    return { path: t, newTextPosition: e };
  }
  createLinePath(t, e, s) {
    const n = t.fromNode, i = t.toNode;
    s || (s = 0);
    const a = e.lineShape || this.options.defaultLineShape || 1, r = e.lineDirection || this.options.layoutDirection || "h";
    let l = n.x, c = n.y, h = i.x, d = i.y;
    const f = { x: 0, y: 0, rotate: 0 };
    if (Number.isNaN(l) || Number.isNaN(c))
      return _("error start node:", n), f.x = 50, f.y = 50, f.rotate = 0, this.createReturnValue("M 0 0 L 100 100", f);
    if (Number.isNaN(h) || Number.isNaN(d))
      return _("error start point:", n), f.x = 50, f.y = 50, f.rotate = 0, this.createReturnValue("M 0 0 L 100 100", f);
    let C = n.el.offsetWidth || n.width || 60, x = n.el.offsetHeight || n.height || 60;
    if (Number.isNaN(C) || Number.isNaN(x))
      return f.x = 50, f.y = 50, f.rotate = 0, this.createReturnValue("M 0 0 L 100 100", f);
    let m = i.el.offsetWidth || i.width || 60, g = i.el.offsetHeight || i.height || 60;
    if (Number.isNaN(m) || Number.isNaN(g))
      return f.x = 50, f.y = 50, f.rotate = 0, this.createReturnValue("M 0 0 L 100 100", f);
    e.isReverse && ([l, c, h, d, C, x, m, g] = [
      h,
      d,
      l,
      c,
      m,
      g,
      C,
      x
    ]);
    const y = [
      l,
      c,
      h,
      d,
      C,
      x,
      m,
      g,
      this.options.defaultNodeShape,
      e.isReverse,
      t.relations.length,
      s
    ], $ = [
      h,
      d,
      l,
      c,
      m,
      g,
      C,
      x,
      this.options.defaultNodeShape,
      !e.isReverse,
      t.relations.length,
      s
    ];
    let M, b, W = this.options.defaultJunctionPoint;
    if (W || (W = le.border), W === le.border ? (M = N.getBorderPoint4MultiLine(...y), b = N.getBorderPoint4MultiLine(...$)) : W === le.ltrb ? (M = N.getRectJoinPoint(...y), b = N.getRectJoinPoint(...$)) : W === le.tb ? (M = N.getRectVJoinPoint(...y), b = N.getRectVJoinPoint(...$)) : W === le.lr && (M = N.getRectHJoinPoint(...y), b = N.getRectHJoinPoint(...$)), !M || !b)
      return this.createReturnValue(
        "Can not create start and end!",
        f
      );
    const k = M.x, I = M.y, Q = b.x, ae = b.y;
    if (Number.isNaN(k) || Number.isNaN(I))
      return console.error("error start point:", n), f.x = 50, f.y = 50, f.rotate = 0, this.createReturnValue("M 0 0 L 100 100", f);
    if (Number.isNaN(Q) || Number.isNaN(ae))
      return console.error("error end point:", i), f.x = 50, f.y = 50, f.rotate = 0, this.createReturnValue("M 0 0 L 100 100", f);
    let E = b.x - M.x, P = b.y - M.y, A = b.x > M.x ? 1 : -1;
    r === "v" && (A = b.y > M.y ? 1 : -1);
    let R = "";
    if (a === 4) {
      const D = 60 / (t.relations.length + 1) * (s + 1) - 30;
      r === "v" ? (P = P - (A * 33 + D), f.x = k + E + 5, f.y = I + A * 40 + D, f.rotate = 90, R = `M ${k} ${I} v${A * 33 + D} h${E + D} v${P}`) : e.reverseText === !0 ? (f.x = k + A * 10 - (A < 0 ? 30 : 0), f.y = I - 5, E = E - A * 120, R = `M ${k} ${I} h${A * 120} v${P} h${E}`) : (f.x = k + A * 50 - (A < 0 ? 30 : 0), f.y = I + P - 5 + D, E = E - (A * 33 + D), P = P + A * D, R = `M ${k} ${I} h${A * 33 + D} v${P} h${E}`);
    } else if (a === 2) {
      const D = b.y > M.y ? 1 : -1, K = Math.abs(E) + Math.abs(P);
      f.x = Math.round(b.x - E / K * 60 - 20), f.y = Math.round(
        b.y - P / K * 60 - 20 * D
      );
      const ce = 1 / (t.relations.length + 1) * (s + 1) - 0.5 + 0.5;
      r === "v" ? R = `M${k},${I} c${0},${A * 30} ${E * ce},${A * -10} ${E},${P}` : R = `M${k},${I} c${A * 30},${0} ${A * -10},${P * ce} ${E},${P}`;
    } else if (a === 6) {
      const D = b.y > M.y ? 1 : -1, K = Math.abs(E) + Math.abs(P);
      f.x = Math.round(b.x - E / K * 60 - 20), f.y = Math.round(
        b.y - P / K * 60 - 20 * D
      ), r === "v" ? R = `M${k},${I} c${0},${P / 2} ${E},${P / 2} ${E},${P}` : R = `M${k},${I} c${E / 2},${0} ${E / 2},${P} ${E},${P}`;
    } else if (a === 3) {
      f.x = b.x - A * 63, f.y = b.y + 3;
      const D = 1 / (t.relations.length + 1) * (s + 1) - 0.5 + 0.5;
      r === "v" ? R = `M${k},${I} c${0},${P * D} ${0},${0} ${E},${P}` : R = `M${k},${I} c${A * 30},${0} ${A * -10},${P * D} ${E},${P}`;
    } else if (a === 5) {
      f.x = b.x - A * 63, f.y = b.y + 3;
      const D = 1 / (t.relations.length + 1) * (s + 1) - 0.5 + 0.5;
      r === "v" ? R = `M${k},${I} c${0},${0} ${0},${P * D} ${E},${P}` : R = `M${k},${I} c${0},${0} ${E * D},${0} ${E},${P}`;
    } else {
      const D = N.getAngleType(E, P);
      f.rotate = N.getTextAngle(k, I, Q, ae);
      const K = D === 2 || D === 4 ? -1 : 1, ce = (P === 0 ? -50 : Math.sin(Math.atan(E / P)) * 10 / Math.sin(90)) * K, $e = E === 0 ? -50 : Math.sin(Math.atan(P / E)) * 10 / Math.sin(90);
      f.x = Math.round(M.x + E / 2 - ce), f.y = Math.round(M.y + P / 2 - $e), Number.isNaN(f.rotate) && (f.rotate = 0), R = `M ${k} ${I} L ${Q} ${ae}`;
    }
    return this.createReturnValue(R, f);
  }
  getTextTransform(t, e, s, n) {
    if (!e || !s)
      return "translate(0,0)";
    const i = t.lineShape === void 0 ? this.options.defaultLineShape : t.lineShape;
    return i === 1 || i === 4 ? `translate(${e},${s})rotate(${n || 0})` : `translate(${e},${s})`;
  }
  getArrow(t, e, s = !1) {
    const n = e.seeks_id === this.options.checkedLineId;
    return t.isHideArrow ? "none" : `url('#${this.getLineArrow(
      t.color,
      s,
      n
    )}')`;
  }
}
class gt extends _t {
  constructor(t, e) {
    super(t, e);
  }
}
const mt = ["onClick"], vt = ["innerHTML"], yt = ["innerHTML"], xt = ["innerHTML"], wt = /* @__PURE__ */ V({
  __name: "RGNode",
  props: {
    nodeProps: null
  },
  setup(o) {
    const t = o, e = G(), s = G(!1), n = G(!1), i = Y(J).value, a = U(() => t.nodeProps.expanded === !1 ? "c-expanded" : "c-collapsed"), r = () => {
      (t.nodeProps.el.offsetWidth !== e.value.offsetWidth || t.nodeProps.el.offsetHeight !== e.value.offsetHeight) && i.updateNodeOffsetSize(
        t.nodeProps,
        e.value.offsetWidth,
        e.value.offsetHeight
      );
    }, l = (m) => {
      i.expandOrCollapseNode(t.nodeProps, m);
    }, c = (m) => {
      i.options.disableDragNode || t.nodeProps.disableDrag || (n.value = !0, s.value = !1, me.startDrag(
        m,
        t.nodeProps,
        h,
        (g, y, $) => {
          const M = g / (i.options.canvasZoom / 100) + $.x, b = y / (i.options.canvasZoom / 100) + $.y;
          i.setNodePosition(t.nodeProps, M, b);
        }
      ));
    }, h = (m, g, y) => {
      if (m === 0 && g === 0) {
        i.onNodeClick(t.nodeProps, y);
        return;
      }
      i.options.isMoveByParentNode && t.nodeProps.lot.childs.forEach(($) => {
        $.x += m, $.y += g;
      }), Math.abs(m) + Math.abs(g) > 6 ? setTimeout(() => {
        _("delay end dragging", n.value), n.value = !1;
      }, 100) : n.value = !1;
    }, d = () => {
      n.value || i.options.disableNodeClickEffect !== !0 && t.nodeProps.disableDefaultClickEffect !== !0 && (s.value = !0);
    }, f = () => {
      i.options.disableNodeClickEffect !== !0 && t.nodeProps.disableDefaultClickEffect !== !0 && (s.value = !1);
    }, C = (m) => {
      n.value || i.onNodeClick(t.nodeProps, m);
    }, x = (m) => m.isShow !== !1 && m.isHide !== !0 && (!m.lot.parent || x(m.lot.parent) === !0);
    return ue(() => {
      r();
    }), we(() => {
      e.value.remove();
    }), (m, g) => Ne((v(), w("div", {
      ref_key: "seeksRGNode$",
      ref: e,
      style: F({
        left: o.nodeProps.x + "px",
        top: o.nodeProps.y + "px",
        opacity: o.nodeProps.opacity > 1 ? o.nodeProps.opacity / 100 : o.nodeProps.opacity
      }),
      class: "rel-node-peel"
    }, [
      o.nodeProps.expandHolderPosition && o.nodeProps.expandHolderPosition !== "hide" || u(i).options.defaultExpandHolderPosition && u(i).options.defaultExpandHolderPosition !== "hide" && o.nodeProps.lot.childs && o.nodeProps.lot.childs.length > 0 ? (v(), w("div", {
        key: 0,
        class: B([[
          "c-expand-positon-" + (o.nodeProps.expandHolderPosition || u(i).options.defaultExpandHolderPosition)
        ], "c-btn-open-close"])
      }, [
        p("span", {
          class: B(u(a)),
          style: F({
            "background-color": o.nodeProps.color || u(i).options.defaultNodeColor
          }),
          onClick: H(l, ["stop"])
        }, null, 14, mt)
      ], 2)) : z("", !0),
      o.nodeProps.html ? (v(), w("div", {
        key: 1,
        onClick: g[0] || (g[0] = H((y) => C(y), ["stop"])),
        onMousedown: g[1] || (g[1] = H((y) => c(y), ["left", "stop"])),
        onTouchstart: g[2] || (g[2] = H((y) => c(y), ["stop"])),
        onMouseover: g[3] || (g[3] = H((y) => d(), ["stop"])),
        onMouseout: g[4] || (g[4] = H((y) => f(), ["stop"])),
        innerHTML: o.nodeProps.html
      }, null, 40, vt)) : (v(), w("div", {
        key: 2,
        class: B([[
          "rel-node-shape-" + (o.nodeProps.nodeShape === void 0 ? u(i).options.defaultNodeShape : o.nodeProps.nodeShape),
          "rel-node-type-" + o.nodeProps.type,
          o.nodeProps.id === u(i).options.checkedNodeId ? "rel-node-checked" : "",
          o.nodeProps.selected ? "rel-node-selected" : "",
          o.nodeProps.styleClass,
          s.value ? "rel-node-hover" : "",
          o.nodeProps.innerHTML ? "rel-diy-node" : ""
        ], "rel-node"]),
        style: F({
          "background-color": o.nodeProps.color === void 0 ? u(i).options.defaultNodeColor : o.nodeProps.color,
          color: o.nodeProps.fontColor === void 0 ? u(i).options.defaultNodeFontColor : o.nodeProps.fontColor,
          border: (o.nodeProps.borderColor || u(i).options.defaultNodeBorderColor) + " solid " + (o.nodeProps.borderWidth || u(i).options.defaultNodeBorderWidth) + "px",
          width: (o.nodeProps.width || u(i).options.defaultNodeWidth) + "px",
          height: (o.nodeProps.height || u(i).options.defaultNodeHeight) + "px"
        }),
        onClick: g[5] || (g[5] = H((y) => C(y), ["stop"])),
        onMousedown: g[6] || (g[6] = H((y) => c(y), ["left", "stop"])),
        onTouchstart: g[7] || (g[7] = H((y) => c(y), ["stop"])),
        onMouseover: g[8] || (g[8] = H((y) => d(), ["stop"])),
        onMouseout: g[9] || (g[9] = H((y) => f(), ["stop"]))
      }, [
        u(i).options.hideNodeContentByZoom === !0 && u(i).options.canvasZoom < 40 ? z("", !0) : T(m.$slots, "node", {
          key: 0,
          node: o.nodeProps
        }, () => [
          o.nodeProps.innerHTML ? (v(), w("div", {
            key: 1,
            innerHTML: o.nodeProps.innerHTML
          }, null, 8, xt)) : (v(), w("div", {
            key: 0,
            style: F({
              color: o.nodeProps.fontColor || u(i).options.defaultNodeFontColor
            }),
            class: "c-node-text"
          }, [
            p("span", {
              innerHTML: o.nodeProps.text
            }, null, 8, yt)
          ], 4))
        ], !0)
      ], 38))
    ], 4)), [
      [ze, x(o.nodeProps)]
    ]);
  }
});
const q = (o, t) => {
  const e = o.__vccOpts || o;
  for (const [s, n] of t)
    e[s] = n;
  return e;
}, kt = /* @__PURE__ */ q(wt, [["__scopeId", "data-v-3618c7b0"]]), bt = ["xlink:href"], Ct = ["x"], Lt = ["xlink:href"], St = /* @__PURE__ */ V({
  __name: "RGLineTextByPath",
  props: {
    link: null,
    relation: null,
    relationIndex: null
  },
  setup(o) {
    const t = o, e = Y(J).value, s = U(() => t.link.seeks_id === e.options.checkedLineId), n = U(() => {
      const a = He(t.relation.text) * 10;
      return (Ve(
        t.link.fromNode.x,
        t.link.fromNode.y,
        t.link.toNode.x,
        t.link.toNode.y
      ) - a) / 2;
    }), i = (a, r) => {
      e.onLineClick(a, t.link, r);
    };
    return (a, r) => (v(), w("g", null, [
      p("use", {
        "xlink:href": "#" + u(e).options.instanceId + "-" + o.link.seeks_id + "-" + o.relationIndex,
        class: B(["c-rg-line", u(s) ? "c-rg-line-checked" : ""]),
        onClick: r[0] || (r[0] = (l) => i(o.relation, l))
      }, null, 10, bt),
      p("text", {
        class: "c-rg-line-text",
        style: F({
          fill: u(s) ? u(e).options.checkedLineColor : o.relation.fontColor ? o.relation.fontColor : o.relation.color ? o.relation.color : void 0
        }),
        x: u(n),
        y: "0",
        onClick: r[1] || (r[1] = (l) => i(o.relation, l))
      }, [
        p("textPath", {
          "xlink:href": "#" + u(e).options.instanceId + "-" + o.link.seeks_id + "-" + o.relationIndex,
          startOffset: "0",
          "text-anchor": "start",
          method: "align",
          spacing: "auto"
        }, ne(o.relation.text), 9, Lt)
      ], 12, Ct)
    ]));
  }
});
const Mt = /* @__PURE__ */ q(St, [["__scopeId", "data-v-cb0ffd30"]]), $t = ["d", "stroke", "marker-start", "marker-end"], Pt = ["transform"], Et = /* @__PURE__ */ V({
  __name: "RGLineSmart",
  props: {
    link: null,
    relation: null,
    relationIndex: null
  },
  setup(o) {
    const t = o, e = Y(J).value, s = U(() => t.link.seeks_id === e.options.checkedLineId), n = U(() => {
      const { path: r, newTextPosition: l } = e.createLinePath(
        t.link,
        t.relation,
        t.relationIndex
      );
      return r;
    }), i = U(() => {
      const { path: r, newTextPosition: l } = e.createLinePath(
        t.link,
        t.relation,
        t.relationIndex
      );
      return l;
    }), a = (r, l) => {
      e.onLineClick(r, t.link, l);
    };
    return (r, l) => (v(), w("g", null, [
      p("path", {
        d: u(n),
        class: B(["c-rg-line", u(s) ? "c-rg-line-checked" : ""]),
        stroke: u(s) ? u(e).options.checkedLineColor : o.relation.color ? o.relation.color : u(e).options.defaultLineColor,
        style: F({
          "stroke-width": (o.relation.lineWidth ? o.relation.lineWidth : u(e).options.defaultLineWidth) + "px"
        }),
        "marker-start": o.relation.showStartArrow && u(e).getArrow(o.relation, o.link, !0),
        "marker-end": o.relation.showEndArrow && u(e).getArrow(o.relation, o.link, !1),
        fill: "none",
        onClick: l[0] || (l[0] = (c) => a(o.relation, c))
      }, null, 14, $t),
      u(e).options.defaultShowLineLabel && u(e).options.canvasZoom > 40 ? (v(), w("g", {
        key: 0,
        transform: u(e).getTextTransform(
          o.relation,
          u(i).x,
          u(i).y,
          u(i).rotate
        )
      }, [
        (v(), w("text", {
          key: "t-" + o.relation.id,
          x: 0,
          y: 0,
          style: F({
            fill: u(s) ? u(e).options.checkedLineColor : o.relation.fontColor ? o.relation.fontColor : o.relation.color ? o.relation.color : void 0
          }),
          class: "c-rg-line-text",
          onClick: l[1] || (l[1] = (c) => a(c))
        }, ne(o.relation.text), 5))
      ], 8, Pt)) : z("", !0)
    ]));
  }
});
const Nt = /* @__PURE__ */ V({
  __name: "RGLink",
  props: {
    linkProps: null
  },
  setup(o) {
    const t = Y(J).value, e = (s) => s.isShow !== !1 && s.isHide !== !0 && (!s.lot.parent || e(s.lot.parent) === !0);
    return (s, n) => o.linkProps.isHide !== !0 && e(o.linkProps.fromNode) && e(o.linkProps.toNode) ? (v(), w("g", {
      key: 0,
      ref: "seeksRGLink",
      class: B([
        u(t).options.checkedLineId == o.linkProps.seeks_id ? "c-rg-link-checked" : ""
      ]),
      transform: "translate(0,0)"
    }, [
      (v(!0), w(O, null, j(o.linkProps.relations, (i, a) => T(s.$slots, "line", {
        line: i,
        relationIndex: a
      }, () => [
        (u(t).options.lineUseTextPath || i.useTextPath) && i.isHide === !1 ? (v(), se(u(Mt), {
          key: "l-" + i.seeks_id,
          link: o.linkProps,
          relation: i,
          "relation-index": a
        }, null, 8, ["link", "relation", "relation-index"])) : i.isHide === !1 ? (v(), se(u(Et), {
          key: "l-" + i.seeks_id,
          link: o.linkProps,
          relation: i,
          "relation-index": a
        }, null, 8, ["link", "relation", "relation-index"])) : z("", !0)
      ], !0)), 256))
    ], 2)) : z("", !0);
  }
});
const zt = /* @__PURE__ */ q(Nt, [["__scopeId", "data-v-a64f93b9"]]), It = ["id", "d", "stroke", "marker-start", "marker-end"], At = /* @__PURE__ */ V({
  __name: "RGLinePath",
  props: {
    link: null,
    relation: null,
    relationIndex: null
  },
  setup(o) {
    const t = o, e = Y(J).value, s = U(() => t.link.seeks_id === e.options.checkedLineId);
    return (n, i) => (v(), w("path", {
      id: u(e).options.instanceId + "-" + o.link.seeks_id + "-" + o.relationIndex,
      d: u(e).createLinePath(o.link, o.relation, o.relationIndex),
      stroke: u(s) ? u(e).options.checkedLineColor : o.relation.color ? o.relation.color : u(e).options.defaultLineColor,
      style: F({
        "stroke-width": (o.relation.lineWidth ? o.relation.lineWidth : u(e).options.defaultLineWidth) + "px"
      }),
      "marker-start": o.relation.showStartArrow && u(e).getArrow(o.relation, o.link, !0),
      "marker-end": o.relation.showEndArrow && u(e).getArrow(o.relation, o.link, !1),
      class: B([u(s) ? "c-rg-line-checked" : ""]),
      fill: "none"
    }, null, 14, It));
  }
}), Se = (o) => (ke("data-v-535155b9"), o = o(), be(), o), Dt = ["id"], Bt = /* @__PURE__ */ Se(() => /* @__PURE__ */ p("stop", {
  offset: "0%",
  "stop-color": "#e52c5c"
}, null, -1)), Ft = /* @__PURE__ */ Se(() => /* @__PURE__ */ p("stop", {
  offset: "100%",
  "stop-color": "#FD8B37"
}, null, -1)), Wt = [
  Bt,
  Ft
], Gt = ["id", "markerWidth", "markerHeight", "refX", "refY"], Rt = ["d"], Ht = ["id", "markerWidth", "markerHeight", "refX", "refY"], Ot = ["d"], Tt = ["id"], Vt = ["id"], Jt = ["id", "markerWidth", "markerHeight", "refX", "refY"], Zt = ["fill", "d"], jt = ["id", "markerWidth", "markerHeight", "refX", "refY"], Yt = ["fill", "d"], Xt = { class: "rel-nodediv rel-nodediv-for-webkit" }, Ut = /* @__PURE__ */ V({
  __name: "RGCanvas",
  setup(o) {
    const t = G(), e = Y(J).value, s = () => {
      t.value.style.setProperty(
        "--stroke",
        `url('#${e.options.instanceId}-lineStyle')`
      ), t.value.style.setProperty(
        "--markerEnd",
        `url('#${e.options.instanceId}-start-arrow-default')`
      ), t.value.style.setProperty(
        "--markerStart",
        `url('#${e.options.instanceId}-arrow-default')`
      ), t.value.style.setProperty(
        "--markerEndChecked",
        `url('#${e.options.instanceId}-arrow-checked')`
      ), t.value.style.setProperty(
        "--markerStartChecked",
        `url('#${e.options.instanceId}-start-arrow-checked')`
      );
    }, n = (l) => {
      if (e.options.disableZoom)
        return l.cancelBubble = !1, !0;
      try {
        l.cancelBubble = !0, l.preventDefault(), l.stopPropagation();
      } catch {
      }
      const c = {
        x: l.clientX,
        y: l.clientY
      };
      let h = l.deltaY;
      h === void 0 && (h = l.wheelDelta);
      const d = -1;
      h > 0 ? e.zoom(5 * d, c) : e.zoom(-5 * d, c);
    }, i = () => {
    }, a = (l) => {
      if (e.options.disableDragCanvas)
        return;
      let c;
      if (ie) {
        let h = null, d = null;
        c = (f, C, x, m, g) => {
          const y = g.touches || g.targetTouches, $ = y[0];
          if (y && y.length > 1) {
            g.preventDefault();
            const M = y[1];
            h || (h = {
              x: M.clientX,
              y: M.clientY
            }, d = e.options.canvasZoom);
            const b = {
              x: $.clientX,
              y: $.clientY
            }, W = {
              x: M.clientX,
              y: M.clientY
            }, k = Math.hypot(
              h.x - m.x,
              h.y - m.y
            ), Q = Math.hypot(
              W.x - b.x,
              W.y - b.y
            ) / k, ae = d * Q;
            e.setZoom(ae);
          } else {
            const M = $.clientX, b = $.clientY, W = x.x + (M - m.x), k = x.y + (b - m.y);
            e.setCanvasOffset(W, k);
          }
        };
      }
      me.startDrag(
        l,
        e.options.canvasOffset,
        i,
        c
      );
    }, r = U(() => ({
      width: `${e.options.canvasSize.width}px`,
      height: `${e.options.canvasSize.height}px`,
      "margin-left": `${e.options.canvasOffset.x}px`,
      "margin-top": `${e.options.canvasOffset.y}px`,
      "background-color": "transparent",
      transform: `scale(${e.options.canvasZoom / 100},${e.options.canvasZoom / 100})`
    }));
    return ue(() => {
      _("[RGCanvas mounted]"), s(), e.setCanvasDom(t.value);
    }), (l, c) => (v(), w("div", {
      style: F({
        width: "100%",
        height: "100%",
        "background-image": "url(" + u(e).options.backgrounImage + ")"
      }),
      class: B([[
        u(e).options.layoutClassName,
        u(e).options.backgrounImageNoRepeat ? "rel-map-background-norepeat" : ""
      ], "rel-map"]),
      onMousedown: c[0] || (c[0] = H((h) => a(h), ["left", "stop"])),
      onTouchstart: c[1] || (c[1] = H((h) => a(h), ["stop"])),
      onWheel: n
    }, [
      p("div", {
        ref: "seeksRGCanvas",
        style: F(u(r)),
        class: "rel-map-canvas"
      }, [
        T(l.$slots, "canvas-plug", {}, void 0, !0),
        p("div", {
          ref_key: "rgCanvas$",
          ref: t,
          class: "rel-linediv",
          style: { overflow: "visible" }
        }, [
          (v(), w("svg", {
            style: F([{
              width: u(e).options.canvasSize.width + "px",
              height: u(e).options.canvasSize.height + "px"
            }, { overflow: "visible" }]),
            xmlns: "http://www.w3.org/2000/svg"
          }, [
            p("defs", null, [
              p("linearGradient", {
                id: u(e).options.instanceId + "-lineStyle",
                x1: "1",
                y1: "0",
                x2: "0",
                y2: "0"
              }, Wt, 8, Dt),
              p("marker", {
                id: u(e).options.instanceId + "-arrow-default",
                markerWidth: u(e).options.defaultLineMarker.markerWidth,
                markerHeight: u(e).options.defaultLineMarker.markerHeight,
                refX: u(e).options.defaultLineMarker.refX,
                refY: u(e).options.defaultLineMarker.refY,
                "marker-units": "strokeWidth",
                orient: "auto",
                viewBox: "0 0 12 12"
              }, [
                p("path", {
                  style: F({ fill: u(e).options.defaultLineColor }),
                  d: u(e).options.defaultLineMarker.data
                }, null, 12, Rt)
              ], 8, Gt),
              p("marker", {
                id: u(e).options.instanceId + "-start-arrow-default",
                markerWidth: u(e).options.defaultLineMarker.markerWidth,
                markerHeight: u(e).options.defaultLineMarker.markerHeight,
                refX: u(e).options.defaultLineMarker.refX,
                refY: u(e).options.defaultLineMarker.refY,
                "marker-units": "strokeWidth",
                orient: "auto",
                viewBox: "0 0 12 12"
              }, [
                p("path", {
                  style: F({ fill: u(e).options.defaultLineColor }),
                  d: u(e).options.defaultLineMarker.data,
                  transform: "translate(12,12)rotate(180)"
                }, null, 12, Ot)
              ], 8, Ht),
              p("marker", {
                id: u(e).options.instanceId + "-arrow-checked",
                markerUnits: "strokeWidth",
                markerWidth: "12",
                markerHeight: "12",
                viewBox: "0 0 12 12",
                refX: "6",
                refY: "6",
                orient: "auto"
              }, [
                p("path", {
                  style: F({ fill: u(e).options.checkedLineColor }),
                  d: "M2,2 L10,6 L2,10 L6,6 L2,2"
                }, null, 4)
              ], 8, Tt),
              p("marker", {
                id: u(e).options.instanceId + "-start-arrow-checked",
                markerUnits: "strokeWidth",
                markerWidth: "12",
                markerHeight: "12",
                viewBox: "0 0 12 12",
                refX: "6",
                refY: "6",
                orient: "auto"
              }, [
                p("path", {
                  style: F({ fill: u(e).options.checkedLineColor }),
                  d: "M2,2 L10,6 L2,10 L6,6 L2,2",
                  transform: "translate(12,12)rotate(180)"
                }, null, 4)
              ], 8, Vt),
              (v(!0), w(O, null, j(u(e).allLineColors, (h) => (v(), w("marker", {
                id: u(e).options.instanceId + "-arrow-" + h.id,
                key: h.id,
                markerWidth: u(e).options.defaultLineMarker.markerWidth,
                markerHeight: u(e).options.defaultLineMarker.markerHeight,
                refX: u(e).options.defaultLineMarker.refX,
                refY: u(e).options.defaultLineMarker.refY,
                "marker-units": "strokeWidth",
                orient: "auto"
              }, [
                p("path", {
                  fill: u(e).options.defaultLineMarker.color || h.color,
                  d: u(e).options.defaultLineMarker.data
                }, null, 8, Zt)
              ], 8, Jt))), 128)),
              (v(!0), w(O, null, j(u(e).allLineColors, (h) => (v(), w("marker", {
                id: u(e).options.instanceId + "-start-arrow-" + h.id,
                key: "start-" + h.id,
                markerWidth: u(e).options.defaultLineMarker.markerWidth,
                markerHeight: u(e).options.defaultLineMarker.markerHeight,
                refX: u(e).options.defaultLineMarker.refX,
                refY: u(e).options.defaultLineMarker.refY,
                "marker-units": "strokeWidth",
                orient: "auto"
              }, [
                p("path", {
                  fill: u(e).options.defaultLineMarker.color || h.color,
                  d: u(e).options.defaultLineMarker.data,
                  transform: "translate(12,12)rotate(180)"
                }, null, 8, Yt)
              ], 8, jt))), 128)),
              (v(!0), w(O, null, j(u(e).graphData.links, (h) => (v(), w(O, null, [
                (v(!0), w(O, null, j(h.relations, (d, f) => (v(), w(O, null, [
                  u(e).options.lineUseTextPath || d.useTextPath ? (v(), se(u(At), {
                    key: d.seeks_id,
                    link: h,
                    relation: d,
                    "relation-index": f
                  }, null, 8, ["link", "relation", "relation-index"])) : z("", !0)
                ], 64))), 256))
              ], 64))), 256))
            ]),
            (v(!0), w(O, null, j(u(e).graphData.links, (h) => (v(), se(u(zt), {
              key: h.seeks_id,
              "link-props": h
            }, {
              line: re(({ line: d }) => [
                T(l.$slots, "line", {
                  line: d,
                  link: h
                }, void 0, !0)
              ]),
              _: 2
            }, 1032, ["link-props"]))), 128))
          ], 4))
        ], 512),
        p("div", Xt, [
          (v(!0), w(O, null, j(u(e).graphData.nodes, (h) => (v(), se(u(kt), {
            key: h.seeks_id,
            "node-props": h
          }, {
            node: re(({ node: d }) => [
              T(l.$slots, "node", { node: d }, void 0, !0)
            ]),
            _: 2
          }, 1032, ["node-props"]))), 128))
        ])
      ], 4)
    ], 38));
  }
});
const qt = /* @__PURE__ */ q(Ut, [["__scopeId", "data-v-535155b9"]]), Qt = { class: "c-debug-tools-row" }, Kt = /* @__PURE__ */ V({
  __name: "GraphDebugPanel",
  setup(o) {
    const t = Y(J).value;
    G(""), G("");
    const e = G(!1), s = () => {
      e.value = !e.value;
    }, n = () => {
      console.log("options:", t.getGraphJsonOptions());
    }, i = () => {
      console.log("data:", t.getGraphJsonData());
    }, a = () => {
      t.enableDebugLog(!t.options.debug), _("debugLog:", t.options.debug);
    };
    return (r, l) => (v(), w("div", null, [
      p("div", {
        class: B([[], "c-setting-panel-button"]),
        onClick: s
      }, " Debug "),
      e.value ? (v(), w("div", {
        key: 0,
        class: B([[], "c-setting-panel"])
      }, [
        p("div", { class: "c-debug-tools-row" }, [
          p("button", { onClick: n }, "print options in console")
        ]),
        p("div", { class: "c-debug-tools-row" }, [
          p("button", { onClick: i }, "print json data in console")
        ]),
        p("div", Qt, [
          Ie(" debug log status: " + ne(u(t).options.debug), 1),
          p("button", { onClick: a }, ne(u(t).options.debug ? "disable" : "enable") + " debug log ", 1)
        ])
      ])) : z("", !0)
    ]));
  }
});
const eo = /* @__PURE__ */ q(Kt, [["__scopeId", "data-v-6d4bb74f"]]), to = {
  ref: "miniView",
  class: "c-mini-graph"
}, oo = /* @__PURE__ */ V({
  __name: "GraphMiniView",
  setup(o) {
    const t = Y(J).value, e = G(100), s = G(0), n = () => {
      let a = 9999, r = -9999, l = 9999, c = -9999;
      for (let h = 0; h < t.graphData.nodes.length; h++) {
        const d = t.graphData.nodes[h];
        d.x < a && (a = d.x), d.x > r && (r = d.x), d.y < l && (l = d.y), d.y > c && (c = d.y);
      }
      return s.value = (c - l) * this.viewWidth / (r - a), this.minX = a, this.minY = l, this.maxX = r, this.maxY = c, s.value;
    }, i = (a) => N.isAllowShowNode(a);
    return (a, r) => (v(), w("div", to, [
      p("div", {
        style: F({
          width: e.value + "px",
          height: n() + "px"
        }),
        class: "c-mini-canvas"
      }, [
        (v(!0), w(O, null, j(u(t).graphData.nodes, (l) => (v(), w(O, null, [
          i(l) ? (v(), w("div", {
            key: l.id,
            style: F({
              left: (l.x - a.minX) * e.value / (a.maxX - a.minX) + "px",
              top: (l.y - a.minY) * s.value / (a.maxY - a.minY) + "px"
            }),
            class: "c-mini-node"
          }, null, 4)) : z("", !0)
        ], 64))), 256))
      ], 4)
    ], 512));
  }
});
const no = /* @__PURE__ */ q(oo, [["__scopeId", "data-v-52c18d33"]]), L = (o) => (ke("data-v-d0169000"), o = o(), be(), o), so = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-resize-" })
], -1)), io = { class: "c-mb-text" }, ao = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-fangda" })
], -1)), lo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u653E\u5927", -1)), ro = [
  ao,
  lo
], co = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-suoxiao" })
], -1)), ho = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u7F29\u5C0F", -1)), uo = [
  co,
  ho
], fo = {
  key: 3,
  class: "c-mb-button"
}, po = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-yuanquanfenxiang" })
], -1)), _o = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u5E03\u5C40", -1)), go = ["onClick"], mo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-yuanquanfenxiang" })
], -1)), vo = { class: "c-mb-text" }, yo = {
  key: 4,
  class: "c-mb-button"
}, xo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-hj2" })
], -1)), wo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u7EBF\u6761", -1)), ko = {
  class: "c-mb-child-panel",
  style: { width: "256px", "margin-left": "-255px" }
}, bo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-hj2" })
], -1)), Co = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u76F4\u7EBF", -1)), Lo = [
  bo,
  Co
], So = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-lianjieliu" })
], -1)), Mo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u7B80\u6D01", -1)), $o = [
  So,
  Mo
], Po = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-lianjieliu" })
], -1)), Eo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u751F\u52A8", -1)), No = [
  Po,
  Eo
], zo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-lianjieliu" })
], -1)), Io = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u9C7C\u5C3E", -1)), Ao = [
  zo,
  Io
], Do = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-hj2" })
], -1)), Bo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u6298\u7EBF", -1)), Fo = [
  Do,
  Bo
], Wo = {
  key: 5,
  class: "c-mb-button"
}, Go = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-lianjie_connecting5" })
], -1)), Ro = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u8FDE\u63A5\u70B9", -1)), Ho = {
  class: "c-mb-child-panel",
  style: { width: "206px", "margin-left": "-205px" }
}, Oo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-lianjie_connecting5" })
], -1)), To = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u8FB9\u7F18", -1)), Vo = [
  Oo,
  To
], Jo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-lianjie_connecting5" })
], -1)), Zo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u56DB\u70B9", -1)), jo = [
  Jo,
  Zo
], Yo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-lianjie_connecting5" })
], -1)), Xo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u4E0A\u4E0B", -1)), Uo = [
  Yo,
  Xo
], qo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-lianjie_connecting5" })
], -1)), Qo = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u5DE6\u53F3", -1)), Ko = [
  qo,
  Qo
], en = ["title"], tn = {
  key: 0,
  class: "rg-icon",
  "aria-hidden": "true"
}, on = /* @__PURE__ */ L(() => /* @__PURE__ */ p("use", { "xlink:href": "#icon-zidong" }, null, -1)), nn = [
  on
], sn = {
  key: 1,
  class: "c-loading-icon rg-icon",
  "aria-hidden": "true"
}, an = /* @__PURE__ */ L(() => /* @__PURE__ */ p("use", { "xlink:href": "#icon-lianjiezhong" }, null, -1)), ln = [
  an
], rn = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u81EA\u52A8", -1)), cn = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-ico_reset" })
], -1)), dn = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u5237\u65B0", -1)), hn = [
  cn,
  dn
], un = {
  key: 8,
  class: "c-mb-button"
}, fn = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-ziyuan" })
], -1)), pn = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "\u4E0B\u8F7D", -1)), _n = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-tupian" })
], -1)), gn = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "PNG", -1)), mn = [
  _n,
  gn
], vn = /* @__PURE__ */ L(() => /* @__PURE__ */ p("svg", {
  class: "rg-icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ p("use", { "xlink:href": "#icon-tupian" })
], -1)), yn = /* @__PURE__ */ L(() => /* @__PURE__ */ p("span", { class: "c-mb-text" }, "JPG", -1)), xn = [
  vn,
  yn
], wn = /* @__PURE__ */ V({
  __name: "GraphMiniToolBar",
  setup(o) {
    const t = Y(J).value, e = G(275), s = G(0), n = G(106);
    ue(() => {
      t.options.layouts.length > 1 && (e.value -= 40);
    });
    const i = () => {
      t.refresh();
    }, a = (c) => {
      _("change layout:", c), at(c, t.options), i();
    }, r = () => {
      t.startAutoLayout();
    }, l = () => {
      s.value++, setTimeout(() => {
        s.value > 0 && s.value--;
      }, 2e3), s.value > 5 && (s.value = 0, t.printGraphJsonData());
    };
    return (c, h) => (v(), w("div", {
      style: F({
        "margin-left": u(t).options.viewELSize.width - 50 + "px",
        "margin-top": (u(t).options.viewELSize.height - 260) / 2 + "px"
      }),
      class: "c-mini-toolbar"
    }, [
      p("div", {
        class: "c-mb-button",
        style: { "margin-top": "0px" },
        onClick: h[0] || (h[0] = (d) => u(t).fullscreen())
      }, [
        so,
        p("span", io, ne(u(t).options.fullscreen ? "\u9000\u51FA" : "\u5168\u5C4F"), 1)
      ]),
      u(t).options.allowShowZoomMenu ? (v(), w("div", {
        key: 0,
        class: "c-mb-button",
        onClick: h[1] || (h[1] = (d) => u(t).zoom(20))
      }, ro)) : z("", !0),
      u(t).options.allowShowZoomMenu ? (v(), w("div", {
        key: 1,
        style: { float: "left", "margin-top": "0px", height: "20px", width: "40px", "border-top": "0px", "border-bottom": "0px", "background-color": "#efefef", color: "#262626", "font-size": "10px", "text-align": "center", "line-height": "20px" },
        onClick: l
      }, ne(u(t).options.canvasZoom) + "% ", 1)) : z("", !0),
      u(t).options.allowShowZoomMenu ? (v(), w("div", {
        key: 2,
        class: "c-mb-button",
        style: { "margin-top": "0px" },
        onClick: h[2] || (h[2] = (d) => u(t).zoom(-20))
      }, uo)) : z("", !0),
      u(t).options.layouts.length > 1 ? (v(), w("div", fo, [
        po,
        _o,
        p("div", {
          style: F({
            width: u(t).options.layouts.length * 70 + 6 + "px",
            "margin-left": u(t).options.layouts.length * -70 - 5 + "px"
          }),
          class: "c-mb-child-panel"
        }, [
          (v(!0), w(O, null, j(u(t).options.layouts, (d) => (v(), w("div", {
            key: d.label,
            class: B(["c-mb-button c-mb-button-c", {
              "c-mb-button-on": u(t).options.layoutLabel === d.label
            }]),
            style: { width: "70px" },
            onClick: (f) => a(d)
          }, [
            mo,
            p("span", vo, ne(d.label), 1)
          ], 10, go))), 128))
        ], 4)
      ])) : z("", !0),
      u(t).options.allowSwitchLineShape ? (v(), w("div", yo, [
        xo,
        wo,
        p("div", ko, [
          p("div", {
            class: B([{
              "c-mb-button-on": u(t).options.defaultLineShape === 1
            }, "c-mb-button c-mb-button-c"]),
            style: { width: "50px" },
            onClick: h[3] || (h[3] = (d) => u(t).setDefaultLineShape(1))
          }, Lo, 2),
          p("div", {
            class: B([{
              "c-mb-button-on": u(t).options.defaultLineShape === 2
            }, "c-mb-button c-mb-button-c"]),
            style: { width: "50px" },
            onClick: h[4] || (h[4] = (d) => u(t).setDefaultLineShape(2))
          }, $o, 2),
          p("div", {
            class: B([{
              "c-mb-button-on": u(t).options.defaultLineShape === 6
            }, "c-mb-button c-mb-button-c"]),
            style: { width: "50px" },
            onClick: h[5] || (h[5] = (d) => u(t).setDefaultLineShape(6))
          }, No, 2),
          p("div", {
            class: B([{
              "c-mb-button-on": u(t).options.defaultLineShape === 5
            }, "c-mb-button c-mb-button-c"]),
            style: { width: "50px" },
            onClick: h[6] || (h[6] = (d) => u(t).setDefaultLineShape(5))
          }, Ao, 2),
          p("div", {
            class: B([{
              "c-mb-button-on": u(t).options.defaultLineShape === 4
            }, "c-mb-button c-mb-button-c"]),
            style: { width: "50px" },
            onClick: h[7] || (h[7] = (d) => u(t).setDefaultLineShape(4))
          }, Fo, 2)
        ])
      ])) : z("", !0),
      u(t).options.allowSwitchJunctionPoint ? (v(), w("div", Wo, [
        Go,
        Ro,
        p("div", Ho, [
          p("div", {
            class: B([{
              "c-mb-button-on": u(t).options.defaultJunctionPoint === "border"
            }, "c-mb-button c-mb-button-c"]),
            style: { width: "50px" },
            onClick: h[8] || (h[8] = (d) => u(t).setDefaultJunctionPoint("border"))
          }, Vo, 2),
          p("div", {
            class: B([{
              "c-mb-button-on": u(t).options.defaultJunctionPoint === "ltrb"
            }, "c-mb-button c-mb-button-c"]),
            style: { width: "50px" },
            onClick: h[9] || (h[9] = (d) => u(t).setDefaultJunctionPoint("ltrb"))
          }, jo, 2),
          p("div", {
            class: B([{
              "c-mb-button-on": u(t).options.defaultJunctionPoint === "tb"
            }, "c-mb-button c-mb-button-c"]),
            style: { width: "50px" },
            onClick: h[10] || (h[10] = (d) => u(t).setDefaultJunctionPoint("tb"))
          }, Uo, 2),
          p("div", {
            class: B([{
              "c-mb-button-on": u(t).options.defaultJunctionPoint === "lr"
            }, "c-mb-button c-mb-button-c"]),
            style: { width: "50px" },
            onClick: h[11] || (h[11] = (d) => u(t).setDefaultJunctionPoint("lr"))
          }, Ko, 2)
        ])
      ])) : z("", !0),
      u(t).options.allowAutoLayoutIfSupport && u(t).options.isNeedShowAutoLayoutButton ? (v(), w("div", {
        key: 6,
        title: u(t).options.autoLayouting ? "\u70B9\u51FB\u505C\u6B62\u81EA\u52A8\u5E03\u5C40" : "\u70B9\u51FB\u5F00\u59CB\u81EA\u52A8\u8C03\u6574\u5E03\u5C40",
        class: B([{ "c-mb-button-on": u(t).options.autoLayouting }, "c-mb-button"]),
        onClick: r
      }, [
        u(t).options.autoLayouting ? (v(), w("svg", sn, ln)) : (v(), w("svg", tn, nn)),
        rn
      ], 10, en)) : z("", !0),
      u(t).options.allowShowRefreshButton ? (v(), w("div", {
        key: 7,
        class: "c-mb-button",
        onClick: i
      }, hn)) : z("", !0),
      u(t).options.allowShowDownloadButton ? (v(), w("div", un, [
        fn,
        pn,
        p("div", {
          style: F({
            width: n.value + "px",
            "margin-left": n.value * -1 + "px"
          }),
          class: "c-mb-child-panel"
        }, [
          p("div", {
            class: "c-mb-button c-mb-button-c",
            style: { width: "50px" },
            onClick: h[12] || (h[12] = (d) => u(t).downloadAsImage("png"))
          }, mn),
          p("div", {
            class: "c-mb-button c-mb-button-c",
            style: { width: "50px" },
            onClick: h[13] || (h[13] = (d) => u(t).downloadAsImage("jpg"))
          }, xn)
        ], 4)
      ])) : z("", !0)
    ], 4));
  }
});
const kn = /* @__PURE__ */ q(wn, [["__scopeId", "data-v-d0169000"]]), bn = /* @__PURE__ */ V({
  __name: "index",
  props: {
    options: null,
    relationGraphCore: null,
    onNodeClick: null,
    onNodeExpand: null,
    onNodeCollapse: null,
    onLineClick: null,
    onImageDownload: null
  },
  emits: [
    "on-node-click",
    "on-node-expand",
    "on-node-collapse",
    "on-line-click",
    "on-download-excel",
    "on-image-download"
  ],
  setup(o, { expose: t }) {
    const e = o, s = G(), n = G();
    Ae(J, n), _("---------------------------graph mounted---------------------------"), ue(() => {
      Te(), _("---------------------------graph mounted---------------------------");
      const a = {
        "on-node-click": e.onNodeClick,
        "on-node-expand": e.onNodeExpand,
        "on-node-collapse": e.onNodeCollapse,
        "on-line-click": e.onLineClick,
        "on-image-download": e.onImageDownload
      }, r = e.relationGraphCore || new gt(e.options, a);
      r.setDom(s.value), r.ready(), n.value = r, de.on("change", i);
    }), we(() => {
      de.off("change", i);
    });
    const i = () => {
      n.value.fullscreen(de.isFullscreen);
    };
    return t({
      onFullscreen: i,
      getInstance() {
        return n.value;
      },
      setOptions(a, r) {
        n.value.setOptions(a, r);
      },
      setJsonData(a, r, l) {
        n.value.setJsonData(
          a,
          r,
          (c) => {
            De(() => {
              c.playShowEffect(() => {
                l && l(c);
              });
            });
          }
        );
      },
      appendJsonData(a, r, l) {
        n.value.appendJsonData(a, r, l);
      },
      setLayouter(a) {
        n.value.setLayouter(a);
      },
      onGraphResize() {
        n.value.refreshNVAnalysisInfo();
      },
      refresh() {
        n.value.refresh();
      },
      focusRootNode() {
        n.value.focusRootNode();
      },
      focusNodeById(a) {
        return n.value.focusNodeById(a);
      },
      getNodeById(a) {
        return n.value.getNodeById(a);
      },
      removeNodeById(a) {
        return n.value.removeNodeById(a);
      },
      getNodes() {
        return n.value.getNodes();
      },
      getLinks() {
        return n.value.getLinks();
      },
      getGraphJsonData() {
        return n.value.getGraphJsonData();
      },
      getGraphJsonOptions() {
        return n.value.getGraphJsonOptions();
      }
    }), (a, r) => (v(), w("div", {
      ref_key: "seeksRelationGraph$",
      ref: s,
      style: F([{ width: "100%", height: "100%" }, { "box-sizing": "border-box" }])
    }, [
      n.value && n.value.options ? (v(), w(O, { key: 0 }, [
        n.value.options.showDebugPanel ? (v(), se(u(eo), { key: 0 })) : z("", !0),
        n.value.options.allowShowMiniToolBar === !0 ? T(a.$slots, "miniToolBar", { key: 1 }, () => [
          ve(u(kn))
        ], !0) : z("", !0),
        n.value.options.allowShowMiniView === !0 ? T(a.$slots, "miniViewPanel", { key: 2 }, () => [
          ve(u(no))
        ], !0) : z("", !0),
        T(a.$slots, "graph-plug", { relationGraph: n.value }, void 0, !0),
        n.value ? (v(), se(u(qt), { key: 3 }, {
          node: re(({ node: l }) => [
            T(a.$slots, "node", {
              node: l,
              relationGraph: n.value
            }, void 0, !0)
          ]),
          line: re(({ line: l, link: c }) => [
            T(a.$slots, "line", {
              line: l,
              link: c,
              relationGraph: n.value
            }, void 0, !0)
          ]),
          "canvas-plug": re(() => [
            T(a.$slots, "canvas-plug", { relationGraph: n.value }, void 0, !0)
          ]),
          _: 3
        })) : z("", !0)
      ], 64)) : z("", !0)
    ], 512));
  }
});
const he = /* @__PURE__ */ q(bn, [["__scopeId", "data-v-361faa52"]]);
he.install = (o) => {
  o.component("RelationGraph", he), o.component("SeeksRelationGraph", he);
};
const Me = he, $n = Me, Pn = Ce, En = Me;
export {
  $n as RelationGraph,
  En as default,
  Pn as version
};
